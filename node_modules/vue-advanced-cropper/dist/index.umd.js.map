{"version":3,"file":"index.umd.js","sources":["../src/core/algorithms.js","../src/core/image.js","../node_modules/debounce/index.js","../src/core/utils.js","../src/Cropper.vue","../node_modules/classnames/index.js","../node_modules/easy-bem/index.js","../src/core/events.js","../src/mixins/draggable.js","../src/core/constants.js","../src/index.js"],"sourcesContent":["import {\n\tHORIZONTAL_DIRECTIONS,\n\tVERTICAL_DIRECTIONS,\n\tALL_DIRECTIONS\n} from './constants';\n\n\nfunction getCurrentWidth(actualCoordinates, directions, coefficient) {\n\treturn actualCoordinates.width + coefficient * (directions.left + directions.right);\n}\n\nfunction getCurrentHeight(actualCoordinates, directions, coefficient) {\n\treturn actualCoordinates.height + coefficient * (directions.top + directions.bottom);\n}\n\nfunction fitConditions(oldDirections, coordinates, restrictions, coefficient, imageSize, ratioBroken) {\n\n\tconst { minHeight, minWidth, maxHeight, maxWidth, } = restrictions;\n\tconst directions = { ...oldDirections, };\n\n\tconst currentWidth = getCurrentWidth(coordinates, directions, coefficient);\n\tconst currentHeight = getCurrentHeight(coordinates, directions, coefficient);\n\n\tif (currentWidth < 0) {\n\t\tif (directions.left < 0 && directions.right < 0) {\n\t\t\tdirections.left = -(coordinates.width - minWidth) / (directions.left / directions.right);\n\t\t\tdirections.right = -(coordinates.width - minWidth) / (directions.right / directions.left);\n\t\t} else if (directions.left < 0) {\n\t\t\tdirections.left = -(coordinates.width - minWidth) / coefficient;\n\t\t} else if (directions.right < 0) {\n\t\t\tdirections.right = -(coordinates.width - minWidth) / coefficient;\n\t\t}\n\t}\n\n\tif (currentHeight < 0) {\n\t\tif (directions.top < 0 && directions.bottom < 0) {\n\t\t\tdirections.top = -(coordinates.height - minHeight) / (directions.top / directions.bottom);\n\t\t\tdirections.bottom = -(coordinates.height - minHeight) / (directions.bottom / directions.top);\n\t\t} else if (directions.top < 0) {\n\t\t\tdirections.top = -(coordinates.height - minHeight);\n\t\t} else if (directions.bottom < 0) {\n\t\t\tdirections.bottom = -(coordinates.height - minHeight);\n\t\t}\n\t}\n\n\tconst maxMultiplier = {\n\t\twidth: Infinity,\n\t\theight: Infinity,\n\t};\n\n\tif (directions.right + directions.left) {\n\t\t// Break right border\n\t\tif (Math.ceil(coordinates.left + coordinates.width + coefficient * directions.right) > imageSize.width) {\n\t\t\tmaxMultiplier.width = Math.min(\n\t\t\t\tmaxMultiplier.width,\n\t\t\t\tMath.abs(Math.floor(imageSize.width - (coordinates.left + coordinates.width)) / (coefficient * directions.right))\n\t\t\t);\n\t\t}\n\t\t// Break left border\n\t\tif (coordinates.left - coefficient * directions.left < 0) {\n\t\t\tmaxMultiplier.width = Math.min(\n\t\t\t\tmaxMultiplier.width,\n\t\t\t\tMath.abs((coordinates.left) / (coefficient * directions.left))\n\t\t\t);\n\t\t}\n\n\t\t// Break min width\n\t\tif (currentWidth < minWidth) {\n\t\t\tmaxMultiplier.width = Math.min(\n\t\t\t\tmaxMultiplier.width,\n\t\t\t\tMath.abs((coordinates.width - minWidth) / ((directions.right + directions.left) * coefficient))\n\t\t\t);\n\t\t}\n\t\t// Break max width\n\t\tif (currentWidth > maxWidth) {\n\t\t\tmaxMultiplier.width = Math.min(\n\t\t\t\tmaxMultiplier.width,\n\t\t\t\tMath.abs((maxWidth - coordinates.width) / ((directions.right + directions.left) * coefficient))\n\t\t\t);\n\t\t}\n\t}\n\n\tif (directions.top + directions.bottom) {\n\t\t// Break bottom border\n\t\tif (Math.ceil(coordinates.top + coordinates.height + coefficient * directions.bottom) > imageSize.height) {\n\t\t\tmaxMultiplier.height = Math.min(\n\t\t\t\tmaxMultiplier.height,\n\t\t\t\tMath.abs(Math.floor(imageSize.height - (coordinates.top + coordinates.height)) / (coefficient * directions.bottom))\n\t\t\t);\n\t\t}\n\t\t// Break top border\n\t\tif (coordinates.top - coefficient * directions.top < 0) {\n\t\t\tmaxMultiplier.height = Math.min(\n\t\t\t\tmaxMultiplier.height,\n\t\t\t\tMath.abs((coordinates.top) / (coefficient * directions.top))\n\t\t\t);\n\t\t}\n\t\t// Break min height\n\t\tif (currentHeight < minHeight) {\n\t\t\tmaxMultiplier.height = Math.min(\n\t\t\t\tmaxMultiplier.height,\n\t\t\t\tMath.abs((coordinates.height - minHeight) / ((directions.top + directions.bottom) * coefficient))\n\t\t\t);\n\t\t}\n\t\t// Break max height\n\t\tif (currentHeight > maxHeight) {\n\t\t\tmaxMultiplier.height = Math.min(\n\t\t\t\tmaxMultiplier.height,\n\t\t\t\tMath.abs((maxHeight - coordinates.height) / ((directions.top + directions.bottom) * coefficient))\n\t\t\t);\n\t\t}\n\t}\n\n\t// Prevent the incorrect resizing due  small values of max multipliers:\n\tif (maxMultiplier.width < 10**(-1)) {\n\t\tmaxMultiplier.width = 0;\n\t}\n\tif (maxMultiplier.height < 10**(-1)) {\n\t\tmaxMultiplier.height = 0;\n\t}\n\n\t// If ratio is not broken, resize all directions independently\n\tif (!ratioBroken) {\n\t\tif (maxMultiplier.width !== Infinity) {\n\t\t\tHORIZONTAL_DIRECTIONS.forEach(direction => {\n\t\t\t\tdirections[direction] *= maxMultiplier.width;\n\t\t\t});\n\t\t}\n\t\tif (maxMultiplier.height !== Infinity) {\n\t\t\tVERTICAL_DIRECTIONS.forEach(direction => {\n\t\t\t\tdirections[direction] *= maxMultiplier.height;\n\t\t\t});\n\t\t}\n\t// If ratio is broken, resize all directions same time to preserve restored aspect ratio\n\t} else {\n\t\tlet multiplier;\n\t\tif (maxMultiplier.height < maxMultiplier.width) {\n\t\t\tmultiplier = maxMultiplier.height;\n\t\t} else if (directions.right + directions.left) {\n\t\t\tmultiplier = maxMultiplier.width;\n\t\t}\n\n\t\tif (maxMultiplier.height !== Infinity || maxMultiplier.width !== Infinity) {\n\t\t\tALL_DIRECTIONS.forEach(direction => {\n\t\t\t\tdirections[direction] *= multiplier;\n\t\t\t});\n\t\t}\n\t}\n\n\treturn directions;\n}\n\nexport function resize ({ coordinates, restrictions, imageSize, coefficient, aspectRatio, resizeEvent }) {\n\tconst actualCoordinates = {\n\t\t...coordinates,\n\t\tright: coordinates.left + coordinates.width,\n\t\tbottom: coordinates.top + coordinates.height,\n\t};\n\n\tconst params = resizeEvent.params || {};\n\n\tlet directions = {\n\t\t...resizeEvent.directions,\n\t};\n\n\tconst allowedDirections = params.allowedDirections || {\n\t\tleft: true,\n\t\tright: true,\n\t\tbottom: true,\n\t\ttop: true,\n\t};\n\n\tObject.keys(allowedDirections).forEach(direction => {\n\t\tif (!allowedDirections[direction]) {\n\t\t\tdirections[direction] = 0;\n\t\t}\n\t});\n\n\tlet currentWidth = getCurrentWidth(actualCoordinates, directions, coefficient);\n\tlet currentHeight = getCurrentHeight(actualCoordinates, directions, coefficient);\n\n\t// 1. First step: fit desired box to existing limits to prevent unpredictable behaviour during aspect ratio fixing\n\tdirections = fitConditions(directions, actualCoordinates, restrictions, coefficient, imageSize);\n\n\t// 2. Second step: fix desired box to correspondent to aspect ratio\n\tcurrentWidth = getCurrentWidth(actualCoordinates, directions, coefficient);\n\tcurrentHeight = getCurrentHeight(actualCoordinates, directions, coefficient);\n\n\t// Checks ratio:\n\tlet ratioBroken = null;\n\tif (params.preserveAspectRatio) {\n\t\tratioBroken = actualCoordinates.width / actualCoordinates.height;\n\t} else if (aspectRatio.minimum && currentWidth / currentHeight < aspectRatio.minimum) {\n\t\tratioBroken = aspectRatio.minimum;\n\t} else if (aspectRatio.maximum && currentWidth / currentHeight > aspectRatio.maximum) {\n\t\tratioBroken = aspectRatio.maximum;\n\t}\n\n\tif (ratioBroken) {\n\t\tlet { respectDirection, } = params;\n\t\tif (!respectDirection) {\n\t\t\tif (actualCoordinates.width > actualCoordinates.height) {\n\t\t\t\trespectDirection = 'width';\n\t\t\t} else {\n\t\t\t\trespectDirection = 'height';\n\t\t\t}\n\t\t}\n\t\tif (respectDirection === 'width') {\n\t\t\tlet overlapHeight = actualCoordinates.height - currentWidth / ratioBroken;\n\t\t\tif (allowedDirections.top && allowedDirections.bottom) {\n\t\t\t\tdirections.bottom = -overlapHeight / (2 * coefficient);\n\t\t\t\tdirections.top = -overlapHeight / (2 * coefficient);\n\t\t\t} else if (allowedDirections.top) {\n\t\t\t\tdirections.top = -overlapHeight / coefficient;\n\t\t\t} else if (allowedDirections.bottom) {\n\t\t\t\tdirections.bottom = -overlapHeight / coefficient;\n\t\t\t} else if (allowedDirections.right) {\n\t\t\t\tdirections.right = 0;\n\t\t\t} else if (allowedDirections.left) {\n\t\t\t\tdirections.left = 0;\n\t\t\t}\n\t\t} else if (respectDirection === 'height') {\n\t\t\tlet overlapWidth = actualCoordinates.width - currentHeight * ratioBroken;\n\t\t\tif (allowedDirections.left && allowedDirections.right) {\n\t\t\t\tdirections.left = -overlapWidth / (2 * coefficient);\n\t\t\t\tdirections.right = -overlapWidth / (2 * coefficient);\n\t\t\t} else if (allowedDirections.left) {\n\t\t\t\tdirections.left = -overlapWidth / coefficient;\n\t\t\t} else if (allowedDirections.right) {\n\t\t\t\tdirections.right = -overlapWidth / coefficient;\n\t\t\t} else if (allowedDirections.top) {\n\t\t\t\tdirections.top = 0;\n\t\t\t} else if (allowedDirections.bottom) {\n\t\t\t\tdirections.bottom = 0;\n\t\t\t}\n\t\t} else {\n\t\t\tALL_DIRECTIONS.forEach(direction => {\n\t\t\t\tdirections[direction] *= 0;\n\t\t\t});\n\t\t}\n\t}\n\n\t// 3. Third step: check if desired box with correct aspect ratios break some limits and fit to this conditions\n\tdirections = fitConditions(directions, actualCoordinates, restrictions, coefficient, imageSize, ratioBroken);\n\n\treturn {\n\t\twidth: coordinates.width + coefficient * (Math.round(directions.right) + Math.round(directions.left)),\n\t\theight: coordinates.height + coefficient * (Math.round(directions.top) + Math.round(directions.bottom)),\n\t\tleft: Math.max(0, coordinates.left - coefficient * Math.round(directions.left)),\n\t\ttop: Math.max(0, coordinates.top - coefficient * Math.round(directions.top)),\n\t};\n}\n\nexport function move ({ coordinates, imageSize, coefficient, moveEvent }) {\n\tconst directions = {\n\t\t...moveEvent.directions,\n\t};\n\n\tconst newCoordinates = {\n\t\tleft: coordinates.left + coefficient * directions.left,\n\t\ttop: coordinates.top + coefficient * directions.top,\n\t\twidth: coordinates.width,\n\t\theight: coordinates.height,\n\t};\n\n\tif (newCoordinates.left < 0) {\n\t\tnewCoordinates.left = 0;\n\t}\n\tif (newCoordinates.left + newCoordinates.width > imageSize.width) {\n\t\tnewCoordinates.left = Math.max(0, imageSize.width - newCoordinates.width);\n\t}\n\tif (newCoordinates.top < 0) {\n\t\tnewCoordinates.top = 0;\n\t}\n\tif (newCoordinates.top + newCoordinates.height > imageSize.height) {\n\t\tnewCoordinates.top = Math.max(0, imageSize.height - newCoordinates.height);\n\t}\n\n\treturn newCoordinates;\n}\n\n// eslint-disable-next-line no-unused-vars\nexport function areaSize ({ cropper, image, imageWidth, imageHeight }) {\n\tconst areaHeight = cropper.clientHeight;\n\tconst areaWidth = cropper.clientWidth;\n\n\tlet currentHeight = areaHeight;\n\tlet currentWidth = imageWidth * areaHeight / imageHeight;\n\n\tif (currentWidth > areaWidth) {\n\t\tcurrentWidth = areaWidth;\n\t\tcurrentHeight = imageHeight * areaWidth / imageWidth;\n\t}\n\n\treturn {\n\t\twidth: currentWidth,\n\t\theight: currentHeight,\n\t};\n}\n\n// eslint-disable-next-line no-unused-vars\nexport function defaultPosition ({ cropper, image, stencilWidth, stencilHeight, imageWidth, imageHeight,  props }) {\n\treturn {\n\t\tleft: imageWidth / 2 - stencilWidth / 2,\n\t\ttop: imageHeight / 2 - stencilHeight / 2,\n\t};\n}\n\n// eslint-disable-next-line no-unused-vars\nexport function defaultSize ({ cropper, image, minWidth, minHeight, maxWidth, maxHeight, imageWidth, imageHeight, props }) {\n\tlet newHeight, newWidth;\n\tif (maxHeight > maxWidth) {\n\t\tnewHeight = Math.max(minHeight, maxHeight * 0.8);\n\t\tnewWidth = Math.max(minWidth, maxWidth * 0.8);\n\t} else {\n\t\tnewWidth = Math.max(minWidth, maxWidth * 0.8);\n\t\tnewHeight = Math.max(minHeight, maxHeight * 0.8);\n\t}\n\n\treturn {\n\t\theight: newHeight,\n\t\twidth: newWidth,\n\t};\n}\n\nexport function percentRestrictions({ minWidth, minHeight, maxWidth, maxHeight, imageWidth, imageHeight }) {\n\treturn {\n\t\tminWidth: minWidth / 100 * imageWidth,\n\t\tminHeight: minHeight / 100 * imageHeight,\n\t\tmaxWidth: maxWidth ? maxWidth / 100 * imageWidth : imageWidth,\n\t\tmaxHeight: maxHeight ? maxHeight / 100 * imageHeight : imageHeight,\n\t};\n}\n","import { XHR_DONE } from './constants';\n\nexport function prepareSource(canvas, image, { flipped, orientation, }) {\n\tconst width = image.naturalWidth;\n\tconst height = image.naturalHeight;\n\n\tconst ctx = canvas.getContext('2d');\n\tcanvas.width = width;\n\tcanvas.height = height;\n\n\tctx.save();\n\n\tif (flipped) {\n\t\tcanvas.width = height;\n\t\tcanvas.height = width;\n\t}\n\n\t// TODO: refactor this\n\tif (orientation == 2) {\n\t\tctx.translate(width, 0);\n\t\tctx.scale(-1, 1);\n\t} else if (orientation == 3) {\n\t\tctx.translate(width, height);\n\t\tctx.rotate(180 / 180 * Math.PI);\n\t} else if (orientation == 4) {\n\t\tctx.translate(0, height);\n\t\tctx.scale(1, -1);\n\t} else if (orientation == 5) {\n\t\tctx.rotate(90 / 180 * Math.PI);\n\t\tctx.scale(1, -1);\n\t} else if (orientation == 6) {\n\t\tctx.rotate(90 / 180 * Math.PI);\n\t\tctx.translate(0, -height);\n\t} else if (orientation == 7) {\n\t\tctx.rotate(270 / 180 * Math.PI);\n\t\tctx.translate(-width, height);\n\t\tctx.scale(1, -1);\n\t} else if (orientation == 8) {\n\t\tctx.translate(0, width);\n\t\tctx.rotate(270 / 180 * Math.PI);\n\t}\n\n\tctx.drawImage(image, 0, 0, width, height);\n\tctx.restore();\n\n\treturn canvas;\n}\n\nexport function getImageTransforms(orientation) {\n\tlet result = {\n\t\torientation,\n\t};\n\tif (orientation) {\n\t\tswitch (orientation) {\n\t\tcase 2:\n\t\t\tresult.scaleX = -1;\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tresult.rotate = -180;\n\t\t\tbreak;\n\t\tcase 4:\n\t\t\tresult.scaleY = -1;\n\t\t\tbreak;\n\t\tcase 5:\n\t\t\tresult.rotate = 90;\n\t\t\tresult.scaleY = -1;\n\t\t\tbreak;\n\t\tcase 6:\n\t\t\tresult.rotate = 90;\n\t\t\tbreak;\n\t\tcase 7:\n\t\t\tresult.rotate = 90;\n\t\t\tresult.scaleX = -1;\n\t\t\tbreak;\n\t\tcase 8:\n\t\t\tresult.rotate = -90;\n\t\t\tbreak;\n\t\t}\n\t}\n\tif (result.rotate === 90 || result.rotate === -90) {\n\t\tresult.flipped = true;\n\t}\n\treturn result;\n}\n\nexport function getStyleTransforms({ rotate, scaleX, scaleY, }) {\n\tlet transform = '';\n\tif (rotate || scaleX || scaleY) {\n\t\tif (rotate) {\n\t\t\ttransform += ` rotate(${rotate}deg) `;\n\t\t}\n\t\tif (scaleX) {\n\t\t\ttransform += ` scaleX(${scaleX}) `;\n\t\t}\n\t\tif (scaleY) {\n\t\t\ttransform += ` scaleY(${scaleY}) `;\n\t\t}\n\t}\n\treturn transform;\n}\n\nexport function parseImage(img) {\n\treturn new Promise((resolve) => {\n\t\tgetImageData(img)\n\t\t\t.then(data => {\n\t\t\t\tresolve(data ?\n\t\t\t\t\t{ arrayBuffer: data, orientation: getOrientation(data) } :\n\t\t\t\t\t{ arrayBuffer: null, orientation: null }\n\t\t\t\t);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.warn(error);\n\t\t\t\tresolve({ arrayBuffer: null, orientation: null, });\n\t\t\t});\n\t});\n}\n\nfunction getImageData(img) {\n\treturn new Promise((resolve, reject) => {\n\t\ttry {\n\t\t\tif (img) {\n\t\t\t\t// Data URL\n\t\t\t\tif (/^data:/i.test(img)) {\n\t\t\t\t\tresolve(base64ToArrayBuffer(img));\n\t\t\t\t// Blob\n\t\t\t\t} else if (/^blob:/i.test(img)) {\n\t\t\t\t\tconst fileReader = new FileReader();\n\t\t\t\t\tfileReader.onload = function (e) {\n\t\t\t\t\t\tresolve(e.target.result);\n\t\t\t\t\t};\n\t\t\t\t\tobjectURLToBlob(img, function (blob) {\n\t\t\t\t\t\tfileReader.readAsArrayBuffer(blob);\n\t\t\t\t\t});\n\t\t\t\t// Simple URL\n\t\t\t\t} else {\n\t\t\t\t\tlet http = new XMLHttpRequest();\n\t\t\t\t\thttp.onreadystatechange = function () {\n\t\t\t\t\t\tif (this.readyState !== XHR_DONE) return;\n\n\t\t\t\t\t\tif (this.status === 200 || this.status === 0) {\n\t\t\t\t\t\t\tresolve(this.response);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treject('Warning: could not load an image to parse its orientation');\n\t\t\t\t\t\t}\n\t\t\t\t\t\thttp = null;\n\t\t\t\t\t};\n\t\t\t\t\thttp.onprogress = function () {\n\t\t\t\t\t\t// Abort the request directly if it not a JPEG image for better performance\n\t\t\t\t\t\tif (http.getResponseHeader('content-type') !== 'image/jpeg') {\n\t\t\t\t\t\t\thttp.abort();\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\thttp.withCredentials  = false;\n\t\t\t\t\thttp.open('GET', img, true);\n\t\t\t\t\thttp.responseType = 'arraybuffer';\n\t\t\t\t\thttp.send(null);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treject('Error: the image is empty');\n\t\t\t}\n\t\t} catch (e) {\n\t\t\treject(e);\n\t\t}\n\t});\n}\n\nfunction objectURLToBlob(url, callback) {\n\tconst http = new XMLHttpRequest();\n\thttp.open('GET', url, true);\n\thttp.responseType = 'blob';\n\thttp.onload = function () {\n\t\tif (this.status == 200 || this.status === 0) {\n\t\t\tcallback(this.response);\n\t\t}\n\t};\n\thttp.send();\n}\n\nfunction base64ToArrayBuffer(base64) {\n\tbase64 = base64.replace(/^data:([^;]+);base64,/gmi, '');\n\tconst binary = atob(base64);\n\tconst len = binary.length;\n\tconst buffer = new ArrayBuffer(len);\n\tconst view = new Uint8Array(buffer);\n\tfor (let i = 0; i < len; i++) {\n\t\tview[i] = binary.charCodeAt(i);\n\t}\n\treturn buffer;\n}\nfunction getStringFromCharCode(dataView, start, length) {\n\tlet str = '';\n\tlet i;\n\tfor (i = start, length += start; i < length; i++) {\n\t\tstr += String.fromCharCode(dataView.getUint8(i));\n\t}\n\treturn str;\n}\n\nfunction getOrientation(arrayBuffer) {\n\ttry {\n\t\tconst dataView = new DataView(arrayBuffer);\n\t\tlet orientation;\n\t\tlet exifIDCode;\n\t\tlet tiffOffset;\n\t\tlet littleEndian;\n\t\tlet app1Start;\n\t\tlet ifdStart;\n\t\t// Only handle JPEG image (start by 0xFFD8)\n\t\tif (dataView.getUint8(0) === 0xFF && dataView.getUint8(1) === 0xD8) {\n\t\t\tconst length = dataView.byteLength;\n\t\t\tlet offset = 2;\n\t\t\twhile (offset + 1 < length) {\n\t\t\t\tif (dataView.getUint8(offset) === 0xFF && dataView.getUint8(offset + 1) === 0xE1) {\n\t\t\t\t\tapp1Start = offset;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\toffset++;\n\t\t\t}\n\t\t}\n\t\tif (app1Start) {\n\t\t\texifIDCode = app1Start + 4;\n\t\t\ttiffOffset = app1Start + 10;\n\t\t\tif (getStringFromCharCode(dataView, exifIDCode, 4) === 'Exif') {\n\t\t\t\tconst endianness = dataView.getUint16(tiffOffset);\n\n\t\t\t\tlittleEndian = endianness === 0x4949;\n\n\t\t\t\tif (littleEndian || endianness === 0x4D4D /* bigEndian */) {\n\t\t\t\t\tif (dataView.getUint16(tiffOffset + 2, littleEndian) === 0x002A) {\n\t\t\t\t\t\tconst firstIFDOffset = dataView.getUint32(tiffOffset + 4, littleEndian);\n\t\t\t\t\t\tif (firstIFDOffset >= 0x00000008) {\n\t\t\t\t\t\t\tifdStart = tiffOffset + firstIFDOffset;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (ifdStart) {\n\t\t\tconst length = dataView.getUint16(ifdStart, littleEndian);\n\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tlet offset = ifdStart + (i * 12) + 2;\n\t\t\t\tif (dataView.getUint16(offset, littleEndian) === 0x0112 /* Orientation */) {\n\t\t\t\t\t// 8 is the offset of the current tag's value\n\t\t\t\t\toffset += 8;\n\t\t\t\t\t// Get the original orientation value\n\t\t\t\t\torientation = dataView.getUint16(offset, littleEndian);\n\t\t\t\t\t// Override the orientation with its default value\n\t\t\t\t\tdataView.setUint16(offset, 1, littleEndian);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn orientation;\n\t} catch (error) {\n\t\treturn null;\n\t}\n}\n\nexport function arrayBufferToDataURL(arrayBuffer) {\n\tconst chunks = [];\n\n\t// Chunk Typed Array for better performance (#435)\n\tconst chunkSize = 8192;\n\tlet uint8 = new Uint8Array(arrayBuffer);\n\n\twhile (uint8.length > 0) {\n\t\tconst value = uint8.subarray(0, chunkSize);\n\t\tchunks.push(String.fromCharCode.apply(\n\t\t\tnull,\n\t\t\tArray.from ? Array.from(value) : Array.slice(value)\n\t\t));\n\t\tuint8 = uint8.subarray(chunkSize);\n\t}\n\n\treturn `data:image/jpeg;base64,${btoa(chunks.join(''))}`;\n}\n","/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\nfunction debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  };\n\n  var debounced = function(){\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n  \n  debounced.flush = function() {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n      \n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n};\n\n// Adds compatibility for ES modules\ndebounce.debounce = debounce;\n\nmodule.exports = debounce;\n","export function directionNames (hDirection, vDirection) {\n\tlet name, classname;\n\tif (hDirection && vDirection) {\n\t\tname = `${hDirection}${vDirection[0].toUpperCase()}${vDirection.slice(1)}`;\n\t\tclassname = `${hDirection}-${vDirection}`;\n\t} else {\n\t\tname = hDirection || vDirection;\n\t\tclassname = hDirection || vDirection;\n\t}\n\treturn { name, classname, };\n}\n\nexport function isLocal(url) {\n\treturn /^data:/.test(url) || /^blob:/.test(url);\n}\n\nexport function isCrossOriginURL(url) {\n\tif (isLocal(url)) {\n\t\treturn false;\n\t}\n\tconst pageLocation = window.location;\n\tconst URL_HOST_PATTERN = /(\\w+:)?(?:\\/\\/)([\\w.-]+)?(?::(\\d+))?\\/?/;\n\tconst urlMatch = URL_HOST_PATTERN.exec(url) || [];\n\tconst urlparts = {\n\t\tprotocol:   urlMatch[1] || '',\n\t\thost:       urlMatch[2] || '',\n\t\tport:       urlMatch[3] || '',\n\t};\n\n\tconst defaultPort = (protocol) => {\n\t\treturn { 'http:':80, 'https:':443, }[protocol];\n\t};\n\n\tconst portOf = (location) => {\n\t\treturn location.port || defaultPort(location.protocol || pageLocation.protocol);\n\t};\n\n\treturn !((!urlparts.protocol && !urlparts.host && !urlparts.port) ||\n\t\tBoolean((urlparts.protocol  && (urlparts.protocol  == pageLocation.protocol)) &&\n\t\t\t\t\t\t\t\t\t(urlparts.host      && (urlparts.host       == pageLocation.host))     &&\n\t\t\t\t\t\t\t\t\t(urlparts.host      && (portOf(urlparts)    == portOf(pageLocation)))\n\t\t));\n}\n\nexport function isUndefined(obj) {\n\treturn typeof obj === 'undefined';\n}\n\nexport function addTimestamp(url) {\n\tconst timestamp = `timestamp=${(new Date()).getTime()}`;\n\treturn url + (url.indexOf('?') === -1 ? '?' : '&') + timestamp;\n}\n","<script>\nimport classnames from 'classnames';\nimport bem from 'easy-bem';\nimport Vue from 'vue';\nimport debounce from 'debounce';\nimport { RectangleStencil } from './components/stencils';\nimport { ResizeEvent, MoveEvent } from './core/events';\nimport { isLocal, isCrossOriginURL, isUndefined, addTimestamp } from './core/utils';\nimport { arrayBufferToDataURL, getImageTransforms, getStyleTransforms, prepareSource, parseImage } from './core/image';\nimport * as algorithms from './core/algorithms';\n\nconst cn = bem('vue-advanced-cropper');\n\nfunction migrateAlgorithm(f, name, transform) {\n\tfunction fallback(params) {\n\t\tconsole.warn(`The arguments will be passed to the prop '${name}' as an single object {${Object.keys(params).join(',')}} in the future releases. You should change the interface of your function.`);\n\t\treturn f(...transform(params));\n\t}\n\treturn (params) => {\n\t\tif (f.length > 1) {\n\t\t\treturn fallback(params);\n\t\t} else {\n\t\t\ttry {\n\t\t\t\treturn f(params);\n\t\t\t} catch (e) {\n\t\t\t\treturn fallback(params);\n\t\t\t}\n\t\t}\n\t};\n}\n\nexport default {\n\tname: 'Cropper',\n\tprops: {\n\t\tsrc: {\n\t\t\ttype: String,\n\t\t\tdefault: null,\n\t\t},\n\t\tresizeAlgorithm: {\n\t\t\ttype: Function,\n\t\t\tdefault: algorithms.resize,\n\t\t},\n\t\tmoveAlgorithm: {\n\t\t\ttype: Function,\n\t\t\tdefault: algorithms.move,\n\t\t},\n\t\tdefaultSize: {\n\t\t\ttype: Function,\n\t\t\tdefault: algorithms.defaultSize,\n\t\t},\n\t\tdefaultPosition: {\n\t\t\ttype: Function,\n\t\t\tdefault: algorithms.defaultPosition,\n\t\t},\n\t\tareaSize: {\n\t\t\ttype: Function,\n\t\t\tdefault: algorithms.areaSize,\n\t\t},\n\t\trestrictions: {\n\t\t\ttype: Function,\n\t\t\tdefault: algorithms.percentRestrictions,\n\t\t},\n\t\tminWidth: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: 10,\n\t\t},\n\t\tminHeight: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: 10,\n\t\t},\n\t\tmaxWidth: {\n\t\t\ttype: [Number, String],\n\t\t},\n\t\tmaxHeight: {\n\t\t\ttype: [Number, String],\n\t\t},\n\t\tstencilComponent: {\n\t\t\ttype: [Object, String],\n\t\t\tdefault() {\n\t\t\t\treturn RectangleStencil;\n\t\t\t},\n\t\t},\n\t\tstencilProps: {\n\t\t\ttype: Object,\n\t\t\tdefault() {\n\t\t\t\treturn {};\n\t\t\t},\n\t\t},\n\t\tclassname: {\n\t\t\ttype: String,\n\t\t},\n\t\timageClassname: {\n\t\t\ttype: String,\n\t\t},\n\t\tareaClassname: {\n\t\t\ttype: String,\n\t\t},\n\t\tbackgroundClassname: {\n\t\t\ttype: String,\n\t\t},\n\t\tdebounce: {\n\t\t\ttype: Number,\n\t\t\tdefault: 500,\n\t\t},\n\t\tcanvas: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tcheckCrossOrigin: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tcheckOrientation: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\ttransitionTime: {\n\t\t\ttype: Number,\n\t\t\tdefault: 300\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tboundarySize: {\n\t\t\t\twidth: null,\n\t\t\t\theight: null,\n\t\t\t},\n\t\t\timageLoaded: false,\n\t\t\timageAttributes: {\n\t\t\t\tcrossOrigin: false,\n\t\t\t\tsrc: null,\n\t\t\t},\n\t\t\timageTransforms: {\n\t\t\t\trotate: null,\n\t\t\t\tscaleX: null,\n\t\t\t\tscaleY: null,\n\t\t\t},\n\t\t\timageSize: {\n\t\t\t\twidth: null,\n\t\t\t\theight: null,\n\t\t\t},\n\t\t\tcoordinates: {\n\t\t\t\tleft: 0,\n\t\t\t\ttop: 0,\n\t\t\t\twidth: 0,\n\t\t\t\theight: 0,\n\t\t\t},\n\t\t\tfrozenDirections: {\n\t\t\t\twidth: false,\n\t\t\t\theight: false,\n\t\t\t},\n\t\t};\n\t},\n\tcomputed: {\n\t\tcoefficient() {\n\t\t\treturn this.imageSize.width\n\t\t\t\t? this.imageSize.width / this.boundarySize.width\n\t\t\t\t: 0;\n\t\t},\n\t\tclasses() {\n\t\t\treturn {\n\t\t\t\tcropper: classnames(cn(), this.classname),\n\t\t\t\timage: classnames(cn('image'), this.imageClassname),\n\t\t\t\tarea: classnames(cn('area'), this.areaClassname),\n\t\t\t\tstretcher: classnames(cn('stretcher')),\n\t\t\t\tbackground: classnames(cn('background'), this.backgroundClassname),\n\t\t\t};\n\t\t},\n\t\tstencilCoordinates() {\n\t\t\tconst { width, height, left, top, } = this.coordinates;\n\t\t\treturn {\n\t\t\t\twidth: width / this.coefficient,\n\t\t\t\theight: height / this.coefficient,\n\t\t\t\tleft: left / this.coefficient,\n\t\t\t\ttop: top / this.coefficient,\n\t\t\t};\n\t\t},\n\t\twrapperStyle() {\n\t\t\treturn {\n\t\t\t\twidth: `${this.stencilCoordinates.width}px`,\n\t\t\t\theight: `${this.stencilCoordinates.height}px`,\n\t\t\t\tleft: `${this.stencilCoordinates.left}px`,\n\t\t\t\ttop: `${this.stencilCoordinates.top}px`,\n\t\t\t};\n\t\t},\n\t\tareaStyle() {\n\t\t\treturn {\n\t\t\t\twidth: this.boundarySize.width\n\t\t\t\t\t? `${this.boundarySize.width}px`\n\t\t\t\t\t: 'auto',\n\t\t\t\theight: this.boundarySize.height\n\t\t\t\t\t? `${this.boundarySize.height}px`\n\t\t\t\t\t: 'auto',\n\t\t\t\topacity: this.imageLoaded ? 1 : 0,\n\t\t\t\ttransition: `opacity ${this.transitionTime}ms`\n\t\t\t};\n\t\t},\n\t\timageStyle() {\n\t\t\tconst result = {\n\t\t\t\tleft: '50%',\n\t\t\t\ttop: '50%',\n\t\t\t\ttransform: 'translate(-50%, -50%)' + getStyleTransforms(this.imageTransforms),\n\t\t\t};\n\n\t\t\tconst flipped = this.imageTransforms.flipped;\n\n\t\t\tif (flipped) {\n\t\t\t\tresult.width = `${this.boundarySize.height}px`;\n\t\t\t\tresult.height = `${this.boundarySize.width}px`;\n\t\t\t} else {\n\t\t\t\tresult.width = `${this.boundarySize.width}px`;\n\t\t\t\tresult.height = `${this.boundarySize.height}px`;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\tstencilRestrictions() {\n\t\t\tconst restrictions = migrateAlgorithm(this.restrictions, 'restrictions', (args) => [\n\t\t\t\targs.minWidth, args.minHeight, args.maxWidth, args.maxHeight, args.imageWidth, args.imageHeight\n\t\t\t])({\n\t\t\t\tminWidth: Number(this.minWidth),\n\t\t\t\tminHeight: Number(this.minHeight),\n\t\t\t\tmaxWidth: Number(this.maxWidth),\n\t\t\t\tmaxHeight: Number(this.maxHeight),\n\t\t\t\timageWidth: this.imageSize.width,\n\t\t\t\timageHeight: this.imageSize.height,\n\t\t\t\tprops: this.$props\n\t\t\t});\n\n\t\t\tif (this.minWidth > this.imageSize.width) {\n\t\t\t\tconsole.warn(`Warning: minimum width (${restrictions.minWidth}px) greater that the image width (${this.imageSize.width}px). It is set equal to the image width and width resizing was blocked`);\n\t\t\t\trestrictions.minWidth = this.imageSize.width;\n\t\t\t\trestrictions.widthFrozen = true;\n\t\t\t}\n\t\t\tif (this.minHeight > this.imageSize.height) {\n\t\t\t\tconsole.warn(`Warning: minimum height (${restrictions.minHeight}px) greater that the image height (${this.imageSize.height}px). It is set equal to the image height and height resizing was blocked`);\n\t\t\t\trestrictions.minHeight = this.imageSize.height;\n\t\t\t\trestrictions.heightFrozen = true;\n\t\t\t}\n\n\t\t\tif (restrictions.minWidth > restrictions.maxWidth) {\n\t\t\t\tconsole.warn(`Warning: maximum width (${restrictions.maxWidth}px) fewer that the minimum width (${restrictions.minWidth}px). It is set equal to the minimum width and width resizing was blocked`);\n\t\t\t\trestrictions.maxWidth = restrictions.minWidth;\n\t\t\t\trestrictions.widthFrozen = true;\n\t\t\t}\n\n\t\t\tif (restrictions.minHeight > restrictions.maxHeight) {\n\t\t\t\tconsole.warn(`Warning: maximum height (${restrictions.maxHeight}px) fewer that the minimum height (${restrictions.minHeight}px). It is set equal to the minimum height and height resizing was blocked`);\n\t\t\t\trestrictions.maxHeight = restrictions.minHeight;\n\t\t\t\trestrictions.heightFrozen = true;\n\t\t\t}\n\n\t\t\tif (!restrictions.maxWidth || restrictions.maxWidth > this.imageSize.width) {\n\t\t\t\trestrictions.maxWidth = this.imageSize.width;\n\t\t\t}\n\t\t\tif (!restrictions.maxHeight || restrictions.maxHeight > this.imageSize.height) {\n\t\t\t\trestrictions.maxHeight = this.imageSize.height;\n\t\t\t}\n\n\t\t\treturn restrictions;\n\t\t},\n\t},\n\twatch: {\n\t\tsrc() {\n\t\t\tthis.onChangeImage();\n\t\t},\n\t\tminWidth() {\n\t\t\tthis.resetCoordinates();\n\t\t},\n\t\tmaxWidth() {\n\t\t\tthis.resetCoordinates();\n\t\t},\n\t\tminHeight() {\n\t\t\tthis.resetCoordinates();\n\t\t},\n\t\tmaxHeight() {\n\t\t\tthis.resetCoordinates();\n\t\t},\n\t},\n\tmounted() {\n\t\tthis.debouncedUpdate = debounce(\n\t\t\tthis.update,\n\t\t\tthis.debounce\n\t\t);\n\t\twindow.addEventListener('resize', this.refreshImage);\n\t\twindow.addEventListener('orientationchange', this.refreshImage);\n\t\tthis.$refs.image.addEventListener('load', () => {\n\t\t\t// After loading image the current component can be unmounted\n\t\t\t// Therefore there is a workaround to prevent processing the following code\n\t\t\tif (this.$refs.image) {\n\t\t\t\tthis.refreshImage().then(this.resetCoordinates);\n\t\t\t}\n\t\t});\n\t\tthis.onChangeImage();\n\t},\n\tdestroyed() {\n\t\twindow.removeEventListener('resize', this.refreshImage);\n\t\twindow.removeEventListener('orientationchange', this.refreshImage);\n\t},\n\tmethods: {\n\t\t// External methods\n\t\tgetResult() {\n\t\t\tif (this.canvas && this.src) {\n\t\t\t\tthis.updateCanvas(this.coordinates);\n\t\t\t\treturn {\n\t\t\t\t\tcoordinates: { ...this.coordinates, },\n\t\t\t\t\tcanvas: this.$refs.canvas,\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\tcoordinates: { ...this.coordinates, },\n\t\t\t\t};\n\t\t\t}\n\t\t},\n\t\t// Internal methods\n\t\tgetArea() {\n\t\t\treturn this.$refs.area;\n\t\t},\n\t\tgetStencil() {\n\t\t\treturn this.$refs.stencil;\n\t\t},\n\t\tupdateCanvas(coordinates) {\n\t\t\t// This function can be asynchronously called because it's debounced\n\t\t\t// Therefore there is workaround to prevent processing after the component was unmounted\n\t\t\tif (!this.$refs.canvas) return;\n\n\t\t\tconst image = this.$refs.image;\n\t\t\tconst source = this.checkOrientation ? prepareSource(this.$refs.sourceCanvas, image, this.imageTransforms) : image;\n\n\t\t\tconst canvas = this.$refs.canvas;\n\t\t\tcanvas.width = coordinates.width;\n\t\t\tcanvas.height = coordinates.height;\n\n\t\t\tconst ctx = canvas.getContext('2d');\n\n\t\t\tctx.drawImage(\n\t\t\t\tsource,\n\t\t\t\tcoordinates.left,\n\t\t\t\tcoordinates.top,\n\t\t\t\tcoordinates.width,\n\t\t\t\tcoordinates.height,\n\t\t\t\t0,\n\t\t\t\t0,\n\t\t\t\tcoordinates.width,\n\t\t\t\tcoordinates.height\n\t\t\t);\n\t\t},\n\t\tupdate() {\n\t\t\tthis.$emit('change', this.getResult());\n\t\t},\n\t\tonChangeCoordinates(newCoordinates, debounce = true) {\n\t\t\tthis.coordinates = newCoordinates;\n\t\t\tif (this.$listeners && this.$listeners.change) {\n\t\t\t\tif (debounce) {\n\t\t\t\t\tthis.debouncedUpdate();\n\t\t\t\t} else {\n\t\t\t\t\tthis.update();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonChangeImage() {\n\t\t\tthis.imageLoaded = false;\n\t\t\tthis.delayedTransforms = null;\n\n\t\t\tif (this.src) {\n\t\t\t\tconst crossOrigin = isCrossOriginURL(this.src);\n\t\t\t\tif (crossOrigin && this.canvas && this.checkCrossOrigin) {\n\t\t\t\t\tthis.imageAttributes.crossOrigin = 'anonymous';\n\t\t\t\t}\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tif (this.checkOrientation) {\n\t\t\t\t\t\tparseImage(crossOrigin ? addTimestamp(this.src) : this.src).then(this.onParseImage);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.onParseImage({});\n\t\t\t\t\t}\n\t\t\t\t}, this.transitionTime);\n\t\t\t} else {\n\t\t\t\tthis.clearImage();\n\t\t\t}\n\t\t},\n\t\tonParseImage({ arrayBuffer, orientation }) {\n\t\t\tif (arrayBuffer && orientation && isLocal(this.src)) {\n\t\t\t\tthis.imageAttributes.src = arrayBufferToDataURL(arrayBuffer);\n\t\t\t} else {\n\t\t\t\tthis.imageAttributes.src = this.src;\n\t\t\t}\n\t\t\tthis.imageTransforms = getImageTransforms(orientation);\n\t\t\tVue.nextTick(() => {\n\t\t\t\tconst image = this.$refs.image;\n\t\t\t\tif (image && image.complete) {\n\t\t\t\t\tthis.refreshImage().then(this.resetCoordinates);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tonResize(resizeEvent) {\n\t\t\tif (this.frozenDirections.width) {\n\t\t\t\tresizeEvent.directions.left = 0;\n\t\t\t\tresizeEvent.directions.right = 0;\n\t\t\t}\n\t\t\tif (this.frozenDirections.height) {\n\t\t\t\tresizeEvent.directions.top = 0;\n\t\t\t\tresizeEvent.directions.bottom = 0;\n\t\t\t}\n\t\t\tthis.onChangeCoordinates(\n\t\t\t\tthis.resizeAlgorithm({\n\t\t\t\t\tcoordinates: this.coordinates,\n\t\t\t\t\trestrictions: this.stencilRestrictions,\n\t\t\t\t\timageSize: this.imageSize,\n\t\t\t\t\tcoefficient: this.coefficient,\n\t\t\t\t\taspectRatio: this.stencilAspectRatios(),\n\t\t\t\t\tresizeEvent\n\t\t\t\t})\n\t\t\t);\n\t\t},\n\t\tonMove(moveEvent) {\n\t\t\tthis.onChangeCoordinates(\n\t\t\t\tthis.moveAlgorithm({\n\t\t\t\t\tcoordinates: this.coordinates,\n\t\t\t\t\timageSize: this.imageSize,\n\t\t\t\t\tcoefficient: this.coefficient,\n\t\t\t\t\tmoveEvent\n\t\t\t\t})\n\t\t\t);\n\t\t},\n\t\tdefaultCoordinates() {\n\t\t\tconst aspectRatio = this.stencilAspectRatios();\n\t\t\tconst { minWidth, minHeight, maxWidth, maxHeight } = this.stencilRestrictions;\n\t\t\tconst imageSize = this.imageSize;\n\n\t\t\tlet coordinates = {};\n\t\t\tif (!aspectRatio.minimum && !aspectRatio.maximum) {\n\t\t\t\tcoordinates.height = minHeight;\n\t\t\t\tcoordinates.width = minWidth;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlet ranges = {\n\t\t\t\t\twidth: {\n\t\t\t\t\t\tmaximum: aspectRatio.minimum ? Math.min(maxHeight, minWidth / aspectRatio.minimum) : maxHeight,\n\t\t\t\t\t\tminimum: aspectRatio.maximum ? Math.max(minHeight, minWidth / aspectRatio.maximum) : minHeight,\n\t\t\t\t\t},\n\t\t\t\t\theight: {\n\t\t\t\t\t\tmaximum: aspectRatio.maximum ? Math.min(maxWidth, minHeight * aspectRatio.maximum) : maxWidth,\n\t\t\t\t\t\tminimum: aspectRatio.mininum ? Math.max(minWidth, minHeight * aspectRatio.mininum) : minWidth,\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tif (ranges.width.maximum >= ranges.width.minimum) {\n\t\t\t\t\tcoordinates.width = minWidth;\n\t\t\t\t\tcoordinates.height = ranges.width.minimum;\n\t\t\t\t} else if (ranges.height.maximum >= ranges.height.minimum) {\n\t\t\t\t\tcoordinates.height = minHeight;\n\t\t\t\t\tcoordinates.width = ranges.height.minimum;\n\t\t\t\t} else {\n\t\t\t\t\tthrow 'Error: current aspect ratio is incompatible with minimum/maximum height and width settings. Can\\'t setup default coordinates';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcoordinates.left = imageSize.width / 2 - coordinates.width / 2;\n\t\t\tcoordinates.top = imageSize.height / 2 - coordinates.height / 2;\n\n\t\t\treturn coordinates;\n\t\t},\n\t\tsetCoordinates(transforms) {\n\t\t\tVue.nextTick(() => {\n\t\t\t\tif (!this.imageLoaded) {\n\t\t\t\t\tthis.delayedTransforms = transforms;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.applyTransforms(transforms);\n\t\t\t});\n\t\t},\n\t\tapplyTransforms(transforms) {\n\t\t\tconst imageSize = this.imageSize;\n\t\t\tconst coefficient = this.coefficient;\n\t\t\tconst aspectRatio = this.stencilAspectRatios();\n\n\t\t\tconst moveAlgorithm = (prevCoordinates, newCoordinates) => {\n\t\t\t\treturn this.moveAlgorithm({\n\t\t\t\t\tcoordinates: prevCoordinates,\n\t\t\t\t\timageSize,\n\t\t\t\t\tcoefficient,\n\t\t\t\t\tmoveEvent: new MoveEvent(null, {\n\t\t\t\t\t\tleft: (newCoordinates.left - prevCoordinates.left) / coefficient,\n\t\t\t\t\t\ttop: (newCoordinates.top - prevCoordinates.top) / coefficient,\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tconst resizeAlgorithm = (prevCoordinates, newCoordinates) => {\n\t\t\t\tlet coordinates = this.defaultCoordinates();\n\t\t\t\tcoordinates = this.resizeAlgorithm({\n\t\t\t\t\tcoordinates,\n\t\t\t\t\trestrictions: this.stencilRestrictions,\n\t\t\t\t\timageSize,\n\t\t\t\t\tcoefficient,\n\t\t\t\t\taspectRatio,\n\t\t\t\t\tresizeEvent: new ResizeEvent(\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tleft: (newCoordinates.width - coordinates.width) / (2 * coefficient),\n\t\t\t\t\t\t\tright: (newCoordinates.width - coordinates.width) / (2 * coefficient),\n\t\t\t\t\t\t\ttop: (newCoordinates.height - coordinates.height) / (2 * coefficient),\n\t\t\t\t\t\t\tbottom: (newCoordinates.height - coordinates.height) / (2 * coefficient),\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t\t});\n\t\t\t\treturn moveAlgorithm(coordinates, { left: prevCoordinates.left, top: prevCoordinates.top });\n\t\t\t};\n\n\t\t\tlet coordinates = this.coordinates;\n\n\t\t\tif (!transforms.forEach) {\n\t\t\t\ttransforms = [transforms];\n\t\t\t}\n\n\t\t\ttransforms.forEach(transform => {\n\t\t\t\tlet changes = {};\n\t\t\t\tif (typeof transform === 'function') {\n\t\t\t\t\tchanges = transform({ ...coordinates }, this.imageSize);\n\t\t\t\t} else {\n\t\t\t\t\tchanges = transform;\n\t\t\t\t}\n\t\t\t\tif (!isUndefined(changes.width) || !isUndefined(changes.height)) {\n\t\t\t\t\tcoordinates = resizeAlgorithm(coordinates, { ...coordinates, ...changes });\n\t\t\t\t}\n\t\t\t\tif (!isUndefined(changes.left) || !isUndefined(changes.top)) {\n\t\t\t\t\tcoordinates = moveAlgorithm(coordinates, { ...coordinates, ...changes });\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.onChangeCoordinates(coordinates, false);\n\t\t\treturn coordinates;\n\t\t},\n\t\tresetCoordinates() {\n\t\t\t// This function can be asynchronously called after completion of refreshing image promise\n\t\t\t// Therefore there is a workaround to prevent processing after the component was unmounted\n\t\t\tif (!this.$refs.image) return;\n\n\t\t\tconst cropper = this.$refs.cropper;\n\t\t\tconst image = this.$refs.image;\n\t\t\tconst { minWidth, minHeight, maxWidth, maxHeight, widthFrozen, heightFrozen, } = this.stencilRestrictions;\n\n\t\t\t// Freeze height or width if there was problems while setting stencil restrictions\n\t\t\tthis.frozenDirections.width = Boolean(widthFrozen);\n\t\t\tthis.frozenDirections.height = Boolean(heightFrozen);\n\n\t\t\tconst defaultSize = migrateAlgorithm(this.defaultSize, 'defaultSize', (args) => (\n\t\t\t\t[args.cropper, args.image, { minWidth: args.minWidth, minHeight: args.minHeight, maxWidth: args.maxWidth, maxHeight: args.maxHeight }, args.imageWidth, args.imageHeight, args.props ]\n\t\t\t))({\n\t\t\t\tcropper,\n\t\t\t\timage,\n\t\t\t\timageWidth: this.imageSize.width,\n\t\t\t\timageHeight: this.imageSize.height,\n\t\t\t\tprops: this.$props,\n\t\t\t\t...this.stencilRestrictions,\n\t\t\t});\n\n\t\t\tif (defaultSize.width < minWidth || defaultSize.height < minHeight || defaultSize.width > maxWidth || defaultSize.height > maxHeight) {\n\t\t\t\tconsole.warn('Warning: default size breaking size restrictions. Check your defaultSize function');\n\t\t\t}\n\n\t\t\tconst transforms = [\n\t\t\t\tdefaultSize,\n\t\t\t\t(coordinates) => ({\n\t\t\t\t\t...migrateAlgorithm(this.defaultPosition, 'defaultPosition', (args) => (\n\t\t\t\t\t\t[args.cropper, args.image, args.stencilWidth, args.stencilHeight, args.imageWidth, args.imageHeight, args.props]\n\t\t\t\t\t))({\n\t\t\t\t\t\tcropper,\n\t\t\t\t\t\timage,\n\t\t\t\t\t\tstencilWidth: coordinates.width,\n\t\t\t\t\t\tstencilHeight: coordinates.height,\n\t\t\t\t\t\timageWidth: this.imageSize.width,\n\t\t\t\t\t\timageHeight: this.imageSize.height,\n\t\t\t\t\t\tprops: this.$props\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t];\n\n\t\t\tif (this.delayedTransforms) {\n\t\t\t\ttransforms.push(...Array.isArray(this.delayedTransforms) ? this.delayedTransforms : [this.delayedTransforms]);\n\t\t\t}\n\n\t\t\tthis.applyTransforms(transforms);\n\t\t\tthis.delayedTransforms = null;\n\t\t\tthis.imageLoaded = true;\n\t\t},\n\t\tclearImage() {\n\t\t\tconst stretcher = this.$refs.stretcher;\n\t\t\tthis.imageLoaded = false;\n\t\t\tthis.onChangeCoordinates({\n\t\t\t\tleft: 0,\n\t\t\t\ttop: 0,\n\t\t\t\twidth: 0,\n\t\t\t\theight: 0,\n\t\t\t}, false);\n\t\t\tsetTimeout(() => {\n\t\t\t\tstretcher.style.height = 'auto';\n\t\t\t\tstretcher.style.width = 'auto';\n\t\t\t}, this.transitionTime);\n\t\t},\n\t\trefreshImage() {\n\t\t\tif (this.src) {\n\t\t\t\tconst image = this.$refs.image;\n\t\t\t\tconst stretcher = this.$refs.stretcher;\n\n\t\t\t\tif (this.imageTransforms.flipped) {\n\t\t\t\t\tthis.imageSize.height = image.naturalWidth;\n\t\t\t\t\tthis.imageSize.width = image.naturalHeight;\n\t\t\t\t} else {\n\t\t\t\t\tthis.imageSize.height = image.naturalHeight;\n\t\t\t\t\tthis.imageSize.width = image.naturalWidth;\n\t\t\t\t}\n\n\t\t\t\tconst aspectRatio = this.imageSize.width / this.imageSize.height;\n\n\t\t\t\tif (this.imageSize.height > this.imageSize.width) {\n\t\t\t\t\tstretcher.style.height = `${this.imageSize.height}px`;\n\t\t\t\t\tstretcher.style.width = `${stretcher.clientHeight * aspectRatio}px`;\n\t\t\t\t\tif (stretcher.clientWidth / stretcher.clientHeight !== aspectRatio) {\n\t\t\t\t\t\tstretcher.style.height = `${stretcher.clientWidth / aspectRatio}px`;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tstretcher.style.width = `${this.imageSize.width}px`;\n\t\t\t\t\tstretcher.style.height = `${stretcher.clientWidth / aspectRatio }px`;\n\t\t\t\t\tif (stretcher.clientHeight / stretcher.clientWidth !== aspectRatio) {\n\t\t\t\t\t\tstretcher.style.width = `${stretcher.clientHeight * aspectRatio}px`;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn new Promise(resolve => {\n\t\t\t\t\tconst cropper = this.$refs.cropper;\n\t\t\t\t\tconst image = this.$refs.image;\n\n\t\t\t\t\tVue.nextTick(() => {\n\t\t\t\t\t\tconst { height, width, } = migrateAlgorithm(this.areaSize, 'areaSize', (args) => ([\n\t\t\t\t\t\t\targs.cropper, args.image, args.imageWidth, args.imageHeight\n\t\t\t\t\t\t]))({\n\t\t\t\t\t\t\tcropper,\n\t\t\t\t\t\t\timage,\n\t\t\t\t\t\t\timageWidth: this.imageSize.width,\n\t\t\t\t\t\t\timageHeight: this.imageSize.height\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (height) {\n\t\t\t\t\t\t\tthis.boundarySize.height = height;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (width) {\n\t\t\t\t\t\t\tthis.boundarySize.width = width;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tstencilAspectRatios() {\n\t\t\tif (this.$refs.stencil.aspectRatios) {\n\t\t\t\treturn this.$refs.stencil.aspectRatios();\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\tminimum: this.stencilProps.aspectRatio || this.stencilProps.minAspectRatio,\n\t\t\t\t\tmaximum: this.stencilProps.aspectRatio || this.stencilProps.maxAspectRatio,\n\t\t\t\t};\n\t\t\t}\n\t\t},\n\t},\n};\n</script>\n\n<template>\n  <div\n    ref=\"cropper\"\n    :class=\"classes.cropper\"\n  >\n    <div\n      :class=\"classes.background\"\n      :style=\"areaStyle\"\n    />\n    <div\n      ref=\"stretcher\"\n      :class=\"classes.stretcher\"\n    />\n    <div\n      ref=\"area\"\n      :class=\"classes.area\"\n      :style=\"areaStyle\"\n    >\n      <img\n        ref=\"image\"\n        :crossOrigin=\"imageAttributes.crossOrigin\"\n        :src=\"imageAttributes.src\"\n        :class=\"classes.image\"\n        :style=\"imageStyle\"\n      >\n      <component\n        :is=\"stencilComponent\"\n        ref=\"stencil\"\n        :img=\"{\n          src: imageAttributes.src,\n          size: imageSize,\n          transforms: imageTransforms\n        }\"\n        :result-coordinates=\"coordinates\"\n        :stencil-coordinates=\"stencilCoordinates\"\n        v-bind=\"stencilProps\"\n        @resize=\"onResize\"\n        @move=\"onMove\"\n      />\n      <canvas\n        v-if=\"canvas\"\n        ref=\"canvas\"\n        :style=\"{display:'none'}\"\n      />\n      <canvas\n        v-if=\"canvas\"\n        ref=\"sourceCanvas\"\n        :style=\"{display:'none'}\"\n      />\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\">\n.vue-advanced-cropper {\n\ttext-align: center;\n\tposition: relative;\n\toverflow: hidden;\n\tuser-select: none;\n\tmax-height: 100%;\n\tmax-width: 100%;\n\n\t&__stretcher {\n\t\tpointer-events: none;\n\t\tposition: relative;\n\t\tmax-width: 100%;\n\t\tmax-height: 100%;\n\t}\n\n  &__image {\n\topacity: 0.5;\n\tuser-select: none;\n\tposition: absolute;\n\ttransform-origin: center;\n\t// Workaround to prevent bugs at the websites with max-width\n\t// rule applied to img (Vuepress for example)\n\tmax-width: unset !important;\n  }\n  &__area {\n\tposition: absolute;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n\ttop: 50%;\n  }\n  &__background {\n\tposition: absolute;\n\tbackground: black;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n  }\n  &__stencil-wrapper {\n\tposition: absolute;\n  }\n}\n</style>\n","/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","'use strict';\r\n\r\n/**\r\n * BEM class name factory.\r\n *\r\n * @typedef {Function} Bem\r\n * @param {String|Object} [elementOrMods] Element name or hash object with mods\r\n * @param {Object} [mods] Hash object with mods\r\n * @returns {String}\r\n */\r\n\r\n/**\r\n * Returns BEM class name factory.\r\n *\r\n * @param {String} componentName Block name\r\n * @returns {Bem}\r\n */\r\nmodule.exports = function bem(componentName) {\r\n    return function (elementOrMods, mods) {\r\n        if (!elementOrMods) {\r\n            return componentName;\r\n        }\r\n\r\n        var element;\r\n\r\n        if (typeof elementOrMods === 'string') {\r\n            element = elementOrMods;\r\n        } else {\r\n            mods = elementOrMods;\r\n        }\r\n\r\n        var base = componentName;\r\n        if (element) {\r\n            base += '__' + element;\r\n        }\r\n\r\n        return base + (\r\n            mods\r\n                ? Object.keys(mods).reduce(function (result, name) {\r\n                    var value = mods[name];\r\n\r\n                    if (value) {\r\n                        result += ' ' + (\r\n                            typeof value === 'boolean'\r\n                                ? (base + '--' + name)\r\n                                : (base + '--' + name + '_' + value)\r\n                        );\r\n                    }\r\n\r\n                    return result;\r\n                }, '')\r\n                : ''\r\n        );\r\n    };\r\n}\r\n","export class ResizeEvent {\n\tconstructor(nativeEvent, directions, params) {\n\t\tthis.nativeEvent = nativeEvent;\n\t\tthis.directions = directions;\n\t\tthis.params = params;\n\t}\n}\n\nexport class MoveEvent {\n\tconstructor(nativeEvent, directions) {\n\t\tthis.nativeEvent = nativeEvent;\n\t\tthis.directions = directions;\n\t}\n}\n\nexport class DragEvent {\n\tconstructor(nativeEvent, element, position, previousPosition, anchor) {\n\t\tthis.nativeEvent = nativeEvent;\n\t\tthis.position = position;\n\t\tthis.previousPosition = previousPosition;\n\t\tthis.element = element;\n\t\tthis.anchor = anchor;\n\t}\n\tshift() {\n\t\tconst { element, anchor, position, } = this;\n\t\tconst { left, top, } = element.getBoundingClientRect();\n\n\t\treturn {\n\t\t\tleft: position.left - left - anchor.left,\n\t\t\ttop: position.top - top - anchor.top,\n\t\t};\n\t}\n}\n","import { DragEvent } from '../core/events';\n\nexport default {\n\tbeforeMount() {\n\t\twindow.addEventListener('mouseup', this.onMouseUp, { passive: false, });\n\t\twindow.addEventListener('mousemove', this.onMouseMove, { passive: false, });\n\t\twindow.addEventListener('touchmove', this.onTouchMove, { passive: false, });\n\t\twindow.addEventListener('touchend', this.onTouchEnd, { passive: false, });\n\t},\n\tbeforeDestroy() {\n\t\twindow.removeEventListener('mouseup', this.onMouseUp);\n\t\twindow.removeEventListener('mousemove', this.onMouseMove);\n\t\twindow.removeEventListener('touchmove', this.onTouchMove);\n\t\twindow.removeEventListener('touchend', this.onTouchEnd);\n\t},\n\tmounted () {\n\t\tif (!this.$refs.draggable) {\n\t\t\tthrow new Error(\n\t\t\t\t'You should add ref \"draggable\" to your root element to use draggable mixin'\n\t\t\t);\n\t\t}\n\t\tthis.touches = [];\n\t\tthis.draggingAnchor = [];\n\t\tthis.hovered = false;\n\t},\n\tmethods: {\n\t\tonMouseOver () {\n\t\t\tif (!this.hovered) {\n\t\t\t\tthis.hovered = true;\n\t\t\t\tthis.$emit('enter');\n\t\t\t}\n\t\t},\n\t\tonMouseLeave () {\n\t\t\tif (this.hovered) {\n\t\t\t\tthis.hovered = false;\n\t\t\t\tthis.$emit('leave');\n\t\t\t}\n\t\t},\n\t\tonTouchStart (e) {\n\t\t\tif (e.cancelable) {\n\t\t\t\tthis.touches = [...e.touches];\n\n\t\t\t\tif (!this.hovered) {\n\t\t\t\t\tthis.$emit('enter');\n\t\t\t\t}\n\n\t\t\t\tif (e.touches.length) {\n\t\t\t\t\tthis.initAnchor(\n\t\t\t\t\t\tthis.touches.reduce(\n\t\t\t\t\t\t\t(mean, touch) => {\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\tclientX: mean.clientX + touch.clientX / e.touches.length,\n\t\t\t\t\t\t\t\t\tclientY: mean.clientY + touch.clientY / e.touches.length,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{ clientX: 0, clientY: 0, }\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tif (e.preventDefault) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\t},\n\t\tonTouchEnd () {\n\t\t\tthis.processEnd();\n\t\t},\n\t\tonTouchMove (e) {\n\t\t\tif (this.touches.length) {\n\t\t\t\tthis.processMove(e, e.touches);\n\t\t\t\tif (e.preventDefault) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t\tif (e.stopPropagation) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonMouseDown (e) {\n\t\t\tconst touch = {\n\t\t\t\tfake: true,\n\t\t\t\tclientX: e.clientX,\n\t\t\t\tclientY: e.clientY,\n\t\t\t};\n\t\t\tthis.touches = [touch];\n\t\t\tthis.initAnchor(touch);\n\t\t\te.stopPropagation();\n\t\t},\n\t\tonMouseMove (e) {\n\t\t\tif (this.touches.length) {\n\t\t\t\tthis.processMove(e, [\n\t\t\t\t\t{\n\t\t\t\t\t\tfake: true,\n\t\t\t\t\t\tclientX: e.clientX,\n\t\t\t\t\t\tclientY: e.clientY,\n\t\t\t\t\t}\n\t\t\t\t]);\n\t\t\t\tif (e.preventDefault) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonMouseUp () {\n\t\t\tthis.touches = [];\n\t\t},\n\t\tinitAnchor (touch) {\n\t\t\tconst draggable = this.$refs.draggable;\n\t\t\tconst { left, right, bottom, top, } = draggable.getBoundingClientRect();\n\n\t\t\tthis.anchor = {\n\t\t\t\tleft: touch.clientX - left,\n\t\t\t\ttop: touch.clientY - top,\n\t\t\t\tbottom: bottom - touch.clientY,\n\t\t\t\tright: right - touch.clientX,\n\t\t\t};\n\t\t},\n\t\tprocessMove (event, touches) {\n\t\t\tconst newTouches = [...touches];\n\t\t\tif (this.touches.length) {\n\t\t\t\tif (this.touches.length === 1 && newTouches.length === 1) {\n\t\t\t\t\tconst element = this.$refs.draggable;\n\t\t\t\t\tthis.$emit('drag', new DragEvent(\n\t\t\t\t\t\tevent,\n\t\t\t\t\t\telement,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tleft: newTouches[0].clientX,\n\t\t\t\t\t\t\ttop: newTouches[0].clientY,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tleft: this.touches[0].clientX,\n\t\t\t\t\t\t\ttop: this.touches[0].clientY,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tthis.anchor\n\t\t\t\t\t));\n\t\t\t\t}\n\t\t\t\tthis.touches = newTouches;\n\t\t\t}\n\t\t},\n\t\tprocessEnd () {\n\t\t\tthis.touches = [];\n\t\t\tif (this.hovered) {\n\t\t\t\tthis.$emit('leave');\n\t\t\t\tthis.hovered = false;\n\t\t\t}\n\t\t},\n\t},\n};\n","export const WEST = 1;\nexport const WEST_NORTH = 2;\nexport const NORTH = 3;\nexport const EAST_NORTH = 4;\nexport const EAST = 5;\nexport const EAST_SOUTH = 6;\nexport const SOUTH = 7;\nexport const WEST_SOUTH = 8;\n\nexport const HORIZONTAL_DIRECTIONS = ['left', 'right'];\nexport const VERTICAL_DIRECTIONS = ['top', 'bottom'];\nexport const ALL_DIRECTIONS = ['left', 'right', 'top', 'bottom'];\n\nexport const XHR_DONE = 4;\n","import Vue from 'vue';\nimport Cropper from './Cropper.vue';\n\nimport {\n\tRectangleStencil,\n\tCircleStencil\n} from './components/stencils';\n\nimport {\n\tSimpleHandler\n} from './components/handlers';\n\nimport {\n\tSimpleLine\n} from './components/lines';\n\nexport {\n\tPreviewResult,\n\tDraggableArea,\n\tBoundingBox,\n\tLineWrapper,\n\tHandlerWrapper,\n\tDraggableElement\n} from './components/service';\n\nexport {\n\tRectangleStencil,\n\tCircleStencil\n} from './components/stencils';\n\nexport {\n\tSimpleHandler\n} from './components/handlers';\n\nexport {\n\tSimpleLine\n} from './components/lines';\n\nexport {\n\tPreviewImage\n} from './components/helpers';\n\nexport {\n\tResizeEvent,\n\tMoveEvent,\n\tDragEvent\n} from './core/events';\n\nexport { default as Cropper } from './Cropper.vue';\n\nVue.component('cropper', Cropper);\nVue.component('rectangle-stencil', RectangleStencil);\nVue.component('circle-stencil', CircleStencil);\nVue.component('simple-handler', SimpleHandler);\nVue.component('simple-line', SimpleLine);\n"],"names":["Math","max","min","String","fromCharCode","debounce","func","wait","immediate","later","last","Date","now","timestamp","timeout","setTimeout","result","apply","context","args","debounced","arguments","callNow","clear","clearTimeout","flush","directionNames","hDirection","vDirection","name","classname","toUpperCase","slice","isLocal","url","test","isCrossOriginURL","pageLocation","window","location","URL_HOST_PATTERN","urlMatch","exec","urlparts","protocol","host","port","defaultPort","portOf","isUndefined","obj","addTimestamp","getTime","indexOf","prepareSource","canvas","image","PI","flipped","orientation","width","naturalWidth","height","naturalHeight","ctx","getContext","save","translate","scale","rotate","drawImage","restore","getImageTransforms","scaleX","scaleY","getStyleTransforms","transform","parseImage","img","Promise","resolve","getImageData","then","data","arrayBuffer","getOrientation","catch","error","console","warn","reject","base64ToArrayBuffer","fileReader","FileReader","onload","e","target","objectURLToBlob","blob","readAsArrayBuffer","http","XMLHttpRequest","onreadystatechange","readyState","status","response","onprogress","getResponseHeader","abort","withCredentials","open","responseType","send","callback","base64","replace","binary","atob","len","length","buffer","ArrayBuffer","view","Uint8Array","i","charCodeAt","getStringFromCharCode","dataView","start","str","getUint8","exifIDCode","tiffOffset","littleEndian","app1Start","ifdStart","DataView","byteLength","offset","endianness","getUint16","firstIFDOffset","getUint32","setUint16","arrayBufferToDataURL","chunks","chunkSize","uint8","value","subarray","push","Array","from","btoa","join","getCurrentWidth","actualCoordinates","directions","coefficient","left","right","getCurrentHeight","top","bottom","fitConditions","oldDirections","coordinates","restrictions","imageSize","ratioBroken","abs","floor","ceil","minHeight","minWidth","maxHeight","maxWidth","currentWidth","currentHeight","maxMultiplier","HORIZONTAL_DIRECTIONS","forEach","direction","VERTICAL_DIRECTIONS","multiplier","ALL_DIRECTIONS","classNames","arg","classes","argType","isArray","inner","key","hasOwn","call","hasOwnProperty","module","exports","default","componentName","elementOrMods","mods","element","base","Object","keys","reduce","ResizeEvent","nativeEvent","params","MoveEvent","DragEvent","position","previousPosition","anchor","getBoundingClientRect","beforeMount","addEventListener","onMouseUp","passive","onMouseMove","onTouchMove","onTouchEnd","beforeDestroy","removeEventListener","mounted","$refs","draggable","Error","touches","draggingAnchor","hovered","methods","onMouseOver","$emit","onMouseLeave","onTouchStart","cancelable","initAnchor","mean","touch","clientX","clientY","preventDefault","stopPropagation","processEnd","processMove","onMouseDown","fake","event","newTouches","round","aspectRatio","resizeEvent","allowedDirections","preserveAspectRatio","minimum","maximum","respectDirection","overlapHeight","overlapWidth","moveEvent","newCoordinates","newHeight","newWidth","cropper","imageWidth","imageHeight","props","stencilWidth","stencilHeight","areaHeight","clientHeight","areaWidth","clientWidth","component","Cropper","Vue","RectangleStencil","CircleStencil","SimpleHandler","SimpleLine"],"mappings":"0PAwPQA,IAAI,CAACC,iBAnMYD,IAAI,CAACE,MC4IrBC,MAAM,CAACC,4lCCjMhB;;;;;;;;;;;;;KAcA,QAASC,CAAAA,CAAT,CAAkBC,CAAlB,CAAwBC,CAAxB,CAA8BC,CAA9B,CAAwC,SAI7BC,CAAAA,GAAQ,IACXC,CAAAA,CAAI,CAAGC,IAAI,CAACC,GAALD,GAAaE,EAEpBH,CAAI,CAAGH,CAAPG,EAAuB,CAARA,EAAAA,CAHJ,CAIbI,CAAO,CAAGC,UAAU,CAACN,CAAD,CAAQF,CAAI,CAAGG,CAAf,CAJP,EAMbI,CAAO,CAAG,IANG,CAOT,CAACN,CAPQ,GAQXQ,CAAM,CAAGV,CAAI,CAACW,KAALX,CAAWY,CAAXZ,CAAoBa,CAApBb,CARE,CASXY,CAAO,CAAGC,CAAI,CAAG,IATN,MAHbL,CAAAA,EAASK,EAAMD,EAASL,EAAWG,EACnC,MAAQT,CAF0B,GAEpBA,CAAI,CAAG,GAFa,KAkBlCa,CAAAA,CAAS,CAAG,UAAU,CACxBF,CAAO,CAAG,IADc,CAExBC,CAAI,CAAGE,SAFiB,CAGxBR,CAAS,CAAGF,IAAI,CAACC,GAALD,EAHY,IAIpBW,CAAAA,CAAO,CAAGd,CAAS,EAAI,CAACM,QACvBA,CAAAA,IAASA,CAAO,CAAGC,UAAU,CAACN,CAAD,CAAQF,CAAR,GAC9Be,IACFN,CAAM,CAAGV,CAAI,CAACW,KAALX,CAAWY,CAAXZ,CAAoBa,CAApBb,EACTY,CAAO,CAAGC,CAAI,CAAG,MAGZH,CAXT,QAcAI,CAAAA,CAAS,CAACG,KAAVH,CAAkB,UAAW,CACvBN,CADuB,GAEzBU,YAAY,CAACV,CAAD,CAFa,CAGzBA,CAAO,CAAG,IAHe,CAA7B,EAOAM,CAAS,CAACK,KAAVL,CAAkB,UAAW,CACvBN,CADuB,GAEzBE,CAAM,CAAGV,CAAI,CAACW,KAALX,CAAWY,CAAXZ,CAAoBa,CAApBb,CAFgB,CAGzBY,CAAO,CAAGC,CAAI,CAAG,IAHQ,CAKzBK,YAAY,CAACV,CAAD,CALa,CAMzBA,CAAO,CAAG,IANe,CAA7B,EAUOM,EC/DF,QAASM,CAAAA,CAAT,CAAyBC,CAAzB,CAAqCC,CAArC,CAAiD,IACnDC,CAAAA,EAAMC,QACNH,CAAAA,CAAU,EAAIC,GACjBC,CAAI,WAAMF,UAAaC,CAAU,CAAC,CAAD,CAAVA,CAAcG,WAAdH,WAA8BA,CAAU,CAACI,KAAXJ,CAAiB,CAAjBA,GACrDE,CAAS,WAAMH,cAAcC,KAE7BC,CAAI,CAAGF,CAAU,EAAIC,EACrBE,CAAS,CAAGH,CAAU,EAAIC,GAEpB,CAAEC,IAAI,CAAJA,CAAF,CAAQC,SAAS,CAATA,CAAR,EAGD,QAASG,CAAAA,CAAT,CAAiBC,CAAjB,CAAsB,OACrB,UAASC,IAAT,CAAcD,CAAd,GAAsB,SAASC,IAAT,CAAcD,CAAd,EAGvB,QAASE,CAAAA,CAAT,CAA0BF,CAA1B,CAA+B,IACjCD,CAAO,CAACC,CAAD,WAD0B,GAI/BG,CAAAA,CAAY,CAAGC,MAAM,CAACC,QAJS,CAK/BC,CAAgB,CAAG,yCALY,CAM/BC,CAAQ,CAAGD,CAAgB,CAACE,IAAjBF,CAAsBN,CAAtBM,GAA8B,EANV,CAO/BG,CAAQ,CAAG,CAChBC,QAAQ,CAAIH,CAAQ,CAAC,CAAD,CAARA,EAAe,EADX,CAEhBI,IAAI,CAAQJ,CAAQ,CAAC,CAAD,CAARA,EAAe,EAFX,CAGhBK,IAAI,CAAQL,CAAQ,CAAC,CAAD,CAARA,EAAe,EAHX,CAPoB,CAa/BM,CAAW,CAAG,SAACH,CAAD,CAAc,OAC1B,SAAU,EAAV,UAAuB,GAAvB,EAA8BA,CAA9B,CADR,CAbqC,CAiB/BI,CAAM,CAAG,SAACT,CAAD,CAAc,OACrBA,CAAAA,CAAQ,CAACO,IAATP,EAAiBQ,CAAW,CAACR,CAAQ,CAACK,QAATL,EAAqBF,CAAY,CAACO,QAAnC,CADpC,CAjBqC,OAqB3B,CAACD,CAAQ,CAACC,QAAV,EAAuBD,CAAQ,CAACE,IAAhC,EAAyCF,CAAQ,CAACG,IAAlD,OACAH,CAAQ,CAACC,QAATD,EAAuBA,CAAQ,CAACC,QAATD,EAAsBN,CAAY,CAACO,QAA1DD,EACDA,CAAQ,CAACE,IADRF,EACsBA,CAAQ,CAACE,IAATF,EAAuBN,CAAY,CAACQ,IAD1DF,EAEDA,CAAQ,CAACE,IAFRF,EAEsBK,CAAM,CAACL,CAAD,CAANK,EAAuBA,CAAM,CAACX,CAAD,CAHnD,EAOJ,QAASY,CAAAA,CAAT,CAAqBC,CAArB,CAA0B,OACV,WAAf,QAAOA,CAAAA,EAGR,QAASC,CAAAA,CAAT,CAAsBjB,CAAtB,CAA2B,IAC3BrB,CAAAA,CAAS,qBAAiB,GAAIF,CAAAA,IAAJ,GAAYyC,OAAZ,UACzBlB,CAAAA,CAAG,EAAyB,CAAC,CAAtBA,GAAAA,CAAG,CAACmB,OAAJnB,CAAY,GAAZA,EAA0B,GAA1BA,CAAgC,GAApC,CAAHA,CAA8CrB,UFhDtCyC,CAAAA,EAAcC,EAAQC,IAAkC,OAqB/CxD,IAAI,CAACyD,EArB0C,CAAzBC,CAAyB,GAAzBA,OAAyB,CAAhBC,CAAgB,GAAhBA,WAAgB,CACjEC,CAAK,CAAGJ,CAAK,CAACK,YADmD,CAEjEC,CAAM,CAAGN,CAAK,CAACO,aAFkD,CAIjEC,CAAG,CAAGT,CAAM,CAACU,UAAPV,CAAkB,IAAlBA,CAJ2D,OAKvEA,CAAAA,CAAM,CAACK,KAAPL,CAAeK,EACfL,CAAM,CAACO,MAAPP,CAAgBO,EAEhBE,CAAG,CAACE,IAAJF,GAEIN,IACHH,CAAM,CAACK,KAAPL,CAAeO,EACfP,CAAM,CAACO,MAAPP,CAAgBK,GAIE,CAAfD,EAAAA,GACHK,CAAG,CAACG,SAAJH,CAAcJ,CAAdI,CAAqB,CAArBA,EACAA,CAAG,CAACI,KAAJJ,CAAU,CAAC,CAAXA,CAAc,CAAdA,GACyB,CAAfL,EAAAA,GACVK,CAAG,CAACG,SAAJH,CAAcJ,CAAdI,CAAqBF,CAArBE,EACAA,CAAG,CAACK,MAAJL,CAAW,GAAXA,GACyB,CAAfL,EAAAA,GACVK,CAAG,CAACG,SAAJH,CAAc,CAAdA,CAAiBF,CAAjBE,EACAA,CAAG,CAACI,KAAJJ,CAAU,CAAVA,CAAa,CAAC,CAAdA,GACyB,CAAfL,EAAAA,GACVK,CAAG,CAACK,MAAJL,CAAW,GAAK,GAAL,EAAXA,EACAA,CAAG,CAACI,KAAJJ,CAAU,CAAVA,CAAa,CAAC,CAAdA,GACyB,CAAfL,EAAAA,GACVK,CAAG,CAACK,MAAJL,CAAW,GAAK,GAAL,EAAXA,EACAA,CAAG,CAACG,SAAJH,CAAc,CAAdA,CAAiB,CAACF,CAAlBE,GACyB,CAAfL,EAAAA,GACVK,CAAG,CAACK,MAAJL,CAAW,IAAM,GAAN,EAAXA,EACAA,CAAG,CAACG,SAAJH,CAAc,CAACJ,CAAfI,CAAsBF,CAAtBE,EACAA,CAAG,CAACI,KAAJJ,CAAU,CAAVA,CAAa,CAAC,CAAdA,GACyB,CAAfL,EAAAA,IACVK,CAAG,CAACG,SAAJH,CAAc,CAAdA,CAAiBJ,CAAjBI,EACAA,CAAG,CAACK,MAAJL,CAAW,IAAM,GAAN,EAAXA,GAGDA,CAAG,CAACM,SAAJN,CAAcR,CAAdQ,CAAqB,CAArBA,CAAwB,CAAxBA,CAA2BJ,CAA3BI,CAAkCF,CAAlCE,EACAA,CAAG,CAACO,OAAJP,GAEOT,EAGD,QAASiB,CAAAA,CAAT,CAA4Bb,CAA5B,CAAyC,IAC3C3C,CAAAA,CAAM,CAAG,CACZ2C,WAAW,CAAXA,CADY,QAGTA,CAAAA,IAEE,IADGA,EAEP3C,CAAM,CAACyD,MAAPzD,CAAgB,CAAC,EAEb,IAJG2C,EAKP3C,CAAM,CAACqD,MAAPrD,CAAgB,CAAC,IAEb,IAPG2C,EAQP3C,CAAM,CAAC0D,MAAP1D,CAAgB,CAAC,EAEb,IAVG2C,GAWP3C,CAAM,CAACqD,MAAPrD,CAAgB,GAChBA,CAAM,CAAC0D,MAAP1D,CAAgB,CAAC,GAEb,IAdG2C,EAeP3C,CAAM,CAACqD,MAAPrD,CAAgB,GAEZ,IAjBG2C,GAkBP3C,CAAM,CAACqD,MAAPrD,CAAgB,GAChBA,CAAM,CAACyD,MAAPzD,CAAgB,CAAC,GAEb,IArBG2C,EAsBP3C,CAAM,CAACqD,MAAPrD,CAAgB,CAAC,YAIG,EAAlBA,GAAAA,CAAM,CAACqD,MAAPrD,EAA0C,CAAC,EAAnBA,GAAAA,CAAM,CAACqD,UAClCrD,CAAM,CAAC0C,OAAP1C,KAEMA,EAGD,QAAS2D,CAAAA,CAAT,EAAA,CAAyD,IAA3BN,CAAAA,CAA2B,GAA3BA,MAA2B,CAAnBI,CAAmB,GAAnBA,MAAmB,CAAXC,CAAW,GAAXA,MAAW,CAC3DE,CAAS,CAAG,EAD+C,QAE3DP,CAAM,EAAII,CAAVJ,EAAoBK,KACnBL,IACHO,CAAS,oBAAeP,YAErBI,IACHG,CAAS,oBAAeH,SAErBC,IACHE,CAAS,oBAAeF,UAGnBE,EAGD,QAASC,CAAAA,CAAT,CAAoBC,CAApB,CAAyB,OACxB,IAAIC,CAAAA,OAAJ,CAAY,SAACC,CAAD,CAAa,CAC/BC,CAAY,CAACH,CAAD,CAAZG,CACEC,IADFD,CACO,SAAAE,CAAA,CAAQ,CACbH,CAAO,CAACG,CAAI,CACX,CAAEC,WAAW,CAAED,CAAf,CAAqBxB,WAAW,CAAE0B,CAAc,CAACF,CAAD,CAAhD,CADW,CAEX,CAAEC,WAAW,CAAE,IAAf,CAAqBzB,WAAW,CAAE,IAAlC,CAFM,CAFT,CAAAsB,EAOEK,KAPFL,CAOQ,SAACM,CAAD,CAAW,CACjBC,OAAO,CAACC,IAARD,CAAaD,CAAbC,CADiB,CAEjBR,CAAO,CAAC,CAAEI,WAAW,CAAE,IAAf,CAAqBzB,WAAW,CAAE,IAAlC,CAAD,CATT,CAAAsB,CADM,CAAA,EAeR,QAASA,CAAAA,CAAT,CAAsBH,CAAtB,CAA2B,OACnB,IAAIC,CAAAA,OAAJ,CAAY,SAACC,CAAD,CAAUU,CAAV,CAAqB,IACnC,KACCZ,EAsCHY,CAAM,CAAC,2BAAD;GApCF,UAAUvD,IAAV,CAAe2C,CAAf,EACHE,CAAO,CAACW,CAAmB,CAACb,CAAD,CAApB,MAED,IAAI,UAAU3C,IAAV,CAAe2C,CAAf,CAAJ,CAAyB,IACzBc,CAAAA,CAAU,CAAG,GAAIC,CAAAA,WACvBD,CAAU,CAACE,MAAXF,CAAoB,SAAUG,CAAV,CAAa,CAChCf,CAAO,CAACe,CAAC,CAACC,MAAFD,CAAS/E,MAAV,CADR,CAF+B,CAK/BiF,CAAe,CAACnB,CAAD,CAAM,SAAUoB,CAAV,CAAgB,CACpCN,CAAU,CAACO,iBAAXP,CAA6BM,CAA7BN,CADc,CAAA,CALT,CAAA,IASA,IACFQ,CAAAA,CAAI,CAAG,GAAIC,CAAAA,eACfD,CAAI,CAACE,kBAALF,CAA0B,UAAY,CACjC,SAAKG,UAD4B,GAGjB,GAAhB,QAAKC,MAAL,EAAuC,CAAhB,QAAKA,MAHK,CAIpCxB,CAAO,CAAC,KAAKyB,QAAN,CAJ6B,CAMpCf,CAAM,CAAC,2DAAD,CAN8B,CAQrCU,CAAI,CAAG,IAR8B,CAAtC,CAFM,CAYNA,CAAI,CAACM,UAALN,CAAkB,UAAY,CAEkB,YAA3CA,GAAAA,CAAI,CAACO,iBAALP,CAAuB,cAAvBA,CAFyB,EAG5BA,CAAI,CAACQ,KAALR,EAHF,CAZM,CAkBNA,CAAI,CAACS,eAALT,GAlBM,CAmBNA,CAAI,CAACU,IAALV,CAAU,KAAVA,CAAiBtB,CAAjBsB,IAnBM,CAoBNA,CAAI,CAACW,YAALX,CAAoB,aApBd,CAqBNA,CAAI,CAACY,IAALZ,CAAU,IAAVA,EApCH,CAyCE,MAAOL,CAAP,CAAU,CACXL,CAAM,CAACK,CAAD,EA3CD,CAAA,EAgDR,QAASE,CAAAA,CAAT,CAAyB/D,CAAzB,CAA8B+E,CAA9B,CAAwC,IACjCb,CAAAA,CAAI,CAAG,GAAIC,CAAAA,eACjBD,CAAI,CAACU,IAALV,CAAU,KAAVA,CAAiBlE,CAAjBkE,IAFuC,CAGvCA,CAAI,CAACW,YAALX,CAAoB,MAHmB,CAIvCA,CAAI,CAACN,MAALM,CAAc,UAAY,EACN,GAAf,OAAKI,MAAL,EAAsC,CAAhB,QAAKA,MADN,GAExBS,CAAQ,CAAC,KAAKR,QAAN,CAFV,CAJuC,CASvCL,CAAI,CAACY,IAALZ,GAGD,QAAST,CAAAA,CAAT,CAA6BuB,CAA7B,CAAqC,CACpCA,CAAM,CAAGA,CAAM,CAACC,OAAPD,CAAe,0BAAfA,CAA2C,EAA3CA,CAD2B,QAE9BE,CAAAA,CAAM,CAAGC,IAAI,CAACH,CAAD,EACbI,CAAG,CAAGF,CAAM,CAACG,OACbC,CAAM,CAAG,GAAIC,CAAAA,WAAJ,CAAgBH,CAAhB,EACTI,CAAI,CAAG,GAAIC,CAAAA,UAAJ,CAAeH,CAAf,EACJI,CAAC,CAAG,EAAGA,CAAC,CAAGN,EAAKM,CAAC,GACzBF,CAAI,CAACE,CAAD,CAAJF,CAAUN,CAAM,CAACS,UAAPT,CAAkBQ,CAAlBR,CAAVM,OAEMF,CAAAA,EAER,QAASM,CAAAA,CAAT,CAA+BC,CAA/B,CAAyCC,CAAzC,CAAgDT,CAAhD,CAAwD,IAEnDK,CAAAA,CAFmD,CACnDK,CAAG,CAAG,EAD6C,KAGlDL,CAAC,CAAGI,CAAJJ,CAAWL,CAAM,EAAIS,EAAOJ,CAAC,CAAGL,EAAQK,CAAC,GAC7CK,CAAG,EAAI9H,EAAoB4H,CAAQ,CAACG,QAATH,CAAkBH,CAAlBG,CAApB5H,CAAP8H,OAEMA,CAAAA,EAGR,QAAS5C,CAAAA,CAAT,CAAwBD,CAAxB,CAAqC,IAChC,IAECzB,CAAAA,CAFD,CAGCwE,CAHD,CAICC,CAJD,CAKCC,CALD,CAMCC,CAND,CAOCC,CAPD,CACGR,CAAQ,CAAG,GAAIS,CAAAA,QAAJ,CAAapD,CAAb,CADd;GAS0B,GAAzB2C,GAAAA,CAAQ,CAACG,QAATH,CAAkB,CAAlBA,GAA0D,GAAzBA,GAAAA,CAAQ,CAACG,QAATH,CAAkB,CAAlBA,SAC9BR,CAAAA,CAAM,CAAGQ,CAAQ,CAACU,WACpBC,CAAM,CAAG,EACNA,CAAM,CAAG,CAATA,CAAanB,GAAQ,IACO,GAA9BQ,GAAAA,CAAQ,CAACG,QAATH,CAAkBW,CAAlBX,GAAwE,GAAlCA,GAAAA,CAAQ,CAACG,QAATH,CAAkBW,CAAM,CAAG,CAA3BX,EAAwC,CACjFO,CAAS,CAAGI,CADqE,OAIlFA,CAAM,MAGJJ,IACHH,CAAU,CAAGG,CAAS,CAAG,EACzBF,CAAU,CAAGE,CAAS,CAAG,GAC8B,MAAnDR,GAAAA,CAAqB,CAACC,CAAD,CAAWI,CAAX,CAAuB,CAAvB,GAAsC,IACxDQ,CAAAA,CAAU,CAAGZ,CAAQ,CAACa,SAATb,CAAmBK,CAAnBL,KAEnBM,CAAY,CAAkB,KAAfM,GAAAA,GAEXN,CAAY,EAAmB,KAAfM,GAAAA,IACsC,EAArDZ,GAAAA,CAAQ,CAACa,SAATb,CAAmBK,CAAU,CAAG,CAAhCL,CAAmCM,CAAnCN,iBAA6D,IAC1Dc,CAAAA,CAAc,CAAGd,CAAQ,CAACe,SAATf,CAAmBK,CAAU,CAAG,CAAhCL,CAAmCM,CAAnCN,EACD,CAAlBc,EAAAA,CAF4D,GAG/DN,CAAQ,CAAGH,CAAU,CAAGS,CAHuC,MAShEN,SAIEG,CAAAA,EAHCnB,CAAM,CAAGQ,CAAQ,CAACa,SAATb,CAAmBQ,CAAnBR,CAA6BM,CAA7BN,EAENH,CAAC,CAAG,EAAGA,CAAC,CAAGL,EAAQK,CAAC,MACxBc,EAASH,CAAQ,CAAQ,EAAJX,CAAAA,CAAZW,CAAsB,EACc,GAA7CR,GAAAA,CAAQ,CAACa,SAATb,CAAmBW,CAAnBX,CAA2BM,CAA3BN,mBAAuE,CAE1EW,CAAM,EAAI,CAFgE,CAI1E/E,CAAW,CAAGoE,CAAQ,CAACa,SAATb,CAAmBW,CAAnBX,CAA2BM,CAA3BN,CAJ4D,CAM1EA,CAAQ,CAACgB,SAAThB,CAAmBW,CAAnBX,CAA2B,CAA3BA,CAA8BM,CAA9BN,CAN0E,aAWtEpE,CAAAA,CAtDR,CAuDE,MAAO4B,CAAP,CAAc,OACR,OAIF,QAASyD,CAAAA,CAAT,CAA8B5D,CAA9B,CAA2C,QAC3C6D,CAAAA,CAAM,CAAG,EADkC,CAI3CC,CAAS,CAAG,IAJ+B,CAK7CC,CAAK,CAAG,GAAIxB,CAAAA,UAAJ,CAAevC,CAAf;AALqC,CAO3B,CAAf+D,CAAAA,CAAK,CAAC5B,MAPoC,EAOxB,IAClB6B,CAAAA,CAAK,CAAGD,CAAK,CAACE,QAANF,CAAe,CAAfA,CAAkBD,CAAlBC,EACdF,CAAM,CAACK,IAAPL,CAAY9I,EAAoBc,KAApBd,CACX,IADWA,CAEXoJ,KAAK,CAACC,IAAND,CAAaA,KAAK,CAACC,IAAND,CAAWH,CAAXG,CAAbA,CAAiCA,KAAK,CAACvH,KAANuH,CAAYH,CAAZG,CAFtBpJ,CAAZ8I,CAFwB,CAMxBE,CAAK,CAAGA,CAAK,CAACE,QAANF,CAAeD,CAAfC,yCAGwBM,IAAI,CAACR,CAAM,CAACS,IAAPT,CAAY,EAAZA,CAAD,WD5Q7BU,CAAAA,EAAgBC,EAAmBC,EAAYC,EAAa,OAC7DF,CAAAA,CAAiB,CAAChG,KAAlBgG,CAA0BE,CAAW,EAAID,CAAU,CAACE,IAAXF,CAAkBA,CAAU,CAACG,KAAjC,EAG7C,QAASC,CAAAA,CAAT,CAA0BL,CAA1B,CAA6CC,CAA7C,CAAyDC,CAAzD,CAAsE,OAC9DF,CAAAA,CAAiB,CAAC9F,MAAlB8F,CAA2BE,CAAW,EAAID,CAAU,CAACK,GAAXL,CAAiBA,CAAU,CAACM,MAAhC,EAG9C,QAASC,CAAAA,CAAT,CAAuBC,CAAvB,CAAsCC,CAAtC,CAAmDC,CAAnD,CAAiET,CAAjE,CAA8EU,CAA9E,CAAyFC,CAAzF,CAAsG,OAwClGzK,IAAI,CAAC0K,GAxC6F,GAwCzF1K,IAAI,CAAC2K,KAxCoF,GAqChG3K,IAAI,CAAC4K,IArC2F,CAE7FC,CAF6F,CAE/CN,CAF+C,CAE7FM,SAF6F,CAElFC,CAFkF,CAE/CP,CAF+C,CAElFO,QAFkF,CAExEC,CAFwE,CAE/CR,CAF+C,CAExEQ,SAFwE,CAE7DC,CAF6D,CAE/CT,CAF+C,CAE7DS,QAF6D,CAG/FnB,CAAU,MAAQQ,EAH6E,CAK/FY,CAAY,CAAGtB,CAAe,CAACW,CAAD,CAAcT,CAAd,CAA0BC,CAA1B,CALiE,CAM/FoB,CAAa,CAAGjB,CAAgB,CAACK,CAAD,CAAcT,CAAd,CAA0BC,CAA1B,CAN+D,CAQlF,CAAfmB,CAAAA,CARiG,GAS9E,CAAlBpB,CAAAA,CAAU,CAACE,IAAXF,EAA0C,CAAnBA,CAAAA,CAAU,CAACG,KAT8D,EAUnGH,CAAU,CAACE,IAAXF,CAAkB,EAAES,CAAW,CAAC1G,KAAZ0G,CAAoBQ,CAAtB,GAAmCjB,CAAU,CAACE,IAAXF,CAAkBA,CAAU,CAACG,KAAhE,CAViF,CAWnGH,CAAU,CAACG,KAAXH,CAAmB,EAAES,CAAW,CAAC1G,KAAZ0G,CAAoBQ,CAAtB,GAAmCjB,CAAU,CAACG,KAAXH,CAAmBA,CAAU,CAACE,IAAjE,CAXgF,EAYvE,CAAlBF,CAAAA,CAAU,CAACE,IAZ8E,CAanGF,CAAU,CAACE,IAAXF,CAAkB,EAAES,CAAW,CAAC1G,KAAZ0G,CAAoBQ,CAAtB,EAAkChB,CAb+C,CActE,CAAnBD,CAAAA,CAAU,CAACG,KAd8E,GAenGH,CAAU,CAACG,KAAXH,CAAmB,EAAES,CAAW,CAAC1G,KAAZ0G,CAAoBQ,CAAtB,EAAkChB,CAf8C,GAmBjF,CAAhBoB,CAAAA,CAnBiG,GAoB/E,CAAjBrB,CAAAA,CAAU,CAACK,GAAXL,EAA0C,CAApBA,CAAAA,CAAU,CAACM,MApB+D,EAqBnGN,CAAU,CAACK,GAAXL,CAAiB,EAAES,CAAW,CAACxG,MAAZwG,CAAqBO,CAAvB,GAAqChB,CAAU,CAACK,GAAXL,CAAiBA,CAAU,CAACM,MAAjE,CArBkF,CAsBnGN,CAAU,CAACM,MAAXN,CAAoB,EAAES,CAAW,CAACxG,MAAZwG,CAAqBO,CAAvB,GAAqChB,CAAU,CAACM,MAAXN,CAAoBA,CAAU,CAACK,GAApE,CAtB+E,EAuBxE,CAAjBL,CAAAA,CAAU,CAACK,GAvB8E,CAwBnGL,CAAU,CAACK,GAAXL,CAAiB,EAAES,CAAW,CAACxG,MAAZwG,CAAqBO,CAAvB,CAxBkF,CAyBrE,CAApBhB,CAAAA,CAAU,CAACM,MAzB8E,GA0BnGN,CAAU,CAACM,MAAXN,CAAoB,EAAES,CAAW,CAACxG,MAAZwG,CAAqBO,CAAvB,CA1B+E,MA8B/FM,CAAAA,CAAa,CAAG,CACrBvH,KAAK,IADgB,CAErBE,MAAM,IAFe;GAKlB+F,CAAU,CAACG,KAAXH,CAAmBA,CAAU,CAACE,OAE7B/J,EAAUsK,CAAW,CAACP,IAAZO,CAAmBA,CAAW,CAAC1G,KAA/B0G,CAAuCR,CAAW,CAAGD,CAAU,CAACG,KAA1EhK,EAAmFwK,CAAS,CAAC5G,QAChGuH,CAAa,CAACvH,KAAduH,CAAsBnL,EACrBmL,CAAa,CAACvH,KADO5D,CAErBA,EAASA,EAAWwK,CAAS,CAAC5G,KAAV4G,EAAmBF,CAAW,CAACP,IAAZO,CAAmBA,CAAW,CAAC1G,KAAlD4G,CAAXxK,GAAwE8J,CAAW,CAAGD,CAAU,CAACG,KAAjGhK,CAATA,CAFqBA,GAMgC,CAAnDsK,CAAAA,CAAW,CAACP,IAAZO,CAAmBR,CAAW,CAAGD,CAAU,CAACE,OAC/CoB,CAAa,CAACvH,KAAduH,CAAsBnL,EACrBmL,CAAa,CAACvH,KADO5D,CAErBA,EAAUsK,CAAW,CAACP,IAAZO,EAAqBR,CAAW,CAAGD,CAAU,CAACE,IAA9CO,CAAVtK,CAFqBA,GAOnBiL,CAAY,CAAGH,IAClBK,CAAa,CAACvH,KAAduH,CAAsBnL,EACrBmL,CAAa,CAACvH,KADO5D,CAErBA,EAAS,CAACsK,CAAW,CAAC1G,KAAZ0G,CAAoBQ,CAArB,GAAkC,CAACjB,CAAU,CAACG,KAAXH,CAAmBA,CAAU,CAACE,IAA/B,EAAuCD,CAAzE,CAAT9J,CAFqBA,GAMnBiL,CAAY,CAAGD,IAClBG,CAAa,CAACvH,KAAduH,CAAsBnL,EACrBmL,CAAa,CAACvH,KADO5D,CAErBA,EAAS,CAACgL,CAAQ,CAAGV,CAAW,CAAC1G,KAAxB,GAAkC,CAACiG,CAAU,CAACG,KAAXH,CAAmBA,CAAU,CAACE,IAA/B,EAAuCD,CAAzE,CAAT9J,CAFqBA,IAOpB6J,CAAU,CAACK,GAAXL,CAAiBA,CAAU,CAACM,SAE3BnK,EAAUsK,CAAW,CAACJ,GAAZI,CAAkBA,CAAW,CAACxG,MAA9BwG,CAAuCR,CAAW,CAAGD,CAAU,CAACM,MAA1EnK,EAAoFwK,CAAS,CAAC1G,SACjGqH,CAAa,CAACrH,MAAdqH,CAAuBnL,EACtBmL,CAAa,CAACrH,MADQ9D,CAEtBA,EAASA,EAAWwK,CAAS,CAAC1G,MAAV0G,EAAoBF,CAAW,CAACJ,GAAZI,CAAkBA,CAAW,CAACxG,MAAlD0G,CAAXxK,GAAyE8J,CAAW,CAAGD,CAAU,CAACM,MAAlGnK,CAATA,CAFsBA,GAM6B,CAAjDsK,CAAAA,CAAW,CAACJ,GAAZI,CAAkBR,CAAW,CAAGD,CAAU,CAACK,MAC9CiB,CAAa,CAACrH,MAAdqH,CAAuBnL,EACtBmL,CAAa,CAACrH,MADQ9D,CAEtBA,EAAUsK,CAAW,CAACJ,GAAZI,EAAoBR,CAAW,CAAGD,CAAU,CAACK,GAA7CI,CAAVtK,CAFsBA,GAMpBkL,CAAa,CAAGL,IACnBM,CAAa,CAACrH,MAAdqH,CAAuBnL,EACtBmL,CAAa,CAACrH,MADQ9D,CAEtBA,EAAS,CAACsK,CAAW,CAACxG,MAAZwG,CAAqBO,CAAtB,GAAoC,CAAChB,CAAU,CAACK,GAAXL,CAAiBA,CAAU,CAACM,MAA7B,EAAuCL,CAA3E,CAAT9J,CAFsBA,GAMpBkL,CAAa,CAAGH,IACnBI,CAAa,CAACrH,MAAdqH,CAAuBnL,EACtBmL,CAAa,CAACrH,MADQ9D,CAEtBA,EAAS,CAAC+K,CAAS,CAAGT,CAAW,CAACxG,MAAzB,GAAoC,CAAC+F,CAAU,CAACK,GAAXL,CAAiBA,CAAU,CAACM,MAA7B,EAAuCL,CAA3E,CAAT9J,CAFsBA,IAQrBmL,CAAa,CAACvH,KAAduH,GAAsB,GAAK,CAAC,KAC/BA,CAAa,CAACvH,KAAduH,CAAsB,GAEnBA,CAAa,CAACrH,MAAdqH,GAAuB,GAAK,CAAC,KAChCA,CAAa,CAACrH,MAAdqH,CAAuB,GAIpB,CAACV,EACAU,CAAa,CAACvH,KAAduH,QACHC,EAAqB,CAACC,OAAtBD,CAA8B,SAAAE,CAAA,CAAa,CAC1CzB,CAAU,CAACyB,CAAD,CAAVzB,EAAyBsB,CAAa,CAACvH,KADxC,CAAAwH,EAIGD,CAAa,CAACrH,MAAdqH,QACHI,EAAmB,CAACF,OAApBE,CAA4B,SAAAD,CAAA,CAAa,CACxCzB,CAAU,CAACyB,CAAD,CAAVzB,EAAyBsB,CAAa,CAACrH,MADxC,CAAAyH,MAKK,IACFC,CAAAA,EACAL,CAAa,CAACrH,MAAdqH,CAAuBA,CAAa,CAACvH,KAFnC,CAGL4H,CAAU,CAAGL,CAAa,CAACrH,MAHtB,CAIK+F,CAAU,CAACG,KAAXH,CAAmBA,CAAU,CAACE,IAJnC,GAKLyB,CAAU,CAAGL,CAAa,CAACvH,KALtB,GAQFuH,CAAa,CAACrH,MAAdqH,QAAqCA,CAAa,CAACvH,KAAduH,MARnC,GASLM,EAAc,CAACJ,OAAfI,CAAuB,SAAAH,CAAA,CAAa,CACnCzB,CAAU,CAACyB,CAAD,CAAVzB,EAAyB2B,CAD1B,CAAAC,QAMK5B,CAAAA,EIxIR,UAAA,EAAA,EAAA,EAAA,idCbA;;;;wBAOC,WAAY,SAKH6B,CAAAA,GAAc,QAIjBC,CAAAA,EAHDC,CAAO,CAAG,GAELhE,CAAC,CAAG,EAAGA,CAAC,CAAGvG,SAAS,CAACkG,OAAQK,CAAC,MAClC+D,EAAMtK,SAAS,CAACuG,CAAD,EACd+D,MAEDE,CAAAA,CAAO,CAAG,MAAOF,CAAAA,KAEL,QAAZE,GAAAA,CAAO,EAA6B,QAAZA,GAAAA,EAC3BD,CAAO,CAACtC,IAARsC,CAAaD,CAAbC,MACM,IAAIrC,KAAK,CAACuC,OAANvC,CAAcoC,CAAdpC,GAAsBoC,CAAG,CAACpE,MAA9B,CAAsC,IACxCwE,CAAAA,CAAK,CAAGL,CAAU,CAACzK,KAAXyK,CAAiB,IAAjBA,CAAuBC,CAAvBD,EACRK,CAFwC,EAG3CH,CAAO,CAACtC,IAARsC,CAAaG,CAAbH,CAHK,CAAA,IAKA,IAAgB,QAAZC,GAAAA,CAAJ,KACD,GAAIG,CAAAA,IAAOL,CAAAA,EACXM,CAAM,CAACC,IAAPD,CAAYN,CAAZM,CAAiBD,CAAjBC,GAAyBN,CAAG,CAACK,CAAD,GAC/BJ,CAAO,CAACtC,IAARsC,CAAaI,CAAbJ,QAMGA,CAAAA,CAAO,CAAClC,IAARkC,CAAa,GAAbA,KA3BJK,CAAAA,CAAM,CAAG,GAAGE,eA8BqBC,CAAM,CAACC,OAjChC,EAkCXX,CAAU,CAACY,OAAXZ,CAAqBA,CAlCV,CAmCXU,SAAAA,CAAiBV,CAnCN,EA0CXpJ,MAAM,CAACoJ,UAAPpJ,CAAoBoJ,CA1CrB,CAAA,OCUD,CAAiB,SAAaa,CAAb,CAA4B,OAClC,UAAUC,CAAV,CAAyBC,CAAzB,CAA+B,IAC9B,CAACD,QACMD,CAAAA,KAGPG,CAAAA,EAEyB,QAAzB,QAAOF,CAAAA,CAPuB,CAQ9BE,CAAO,CAAGF,CARoB,CAU9BC,CAAI,CAAGD,CAVuB,IAa9BG,CAAAA,CAAI,CAAGJ,QACPG,CAAAA,IACAC,CAAI,EAAI,KAAOD,GAGZC,CAAI,EACPF,CAAI,CACEG,MAAM,CAACC,IAAPD,CAAYH,CAAZG,EAAkBE,MAAlBF,CAAyB,SAAU5L,CAAV,CAAkBa,CAAlB,CAAwB,IAC3CuH,CAAAA,CAAK,CAAGqD,CAAI,CAAC5K,CAAD,QAEZuH,CAAAA,IACApI,CAAM,EAAI,KACW,SAAjB,QAAOoI,CAAAA,CAAP,CACOuD,CAAI,CAAG,IAAPA,CAAc9K,CADrB,CAEO8K,CAAI,CAAG,IAAPA,CAAc9K,CAAd8K,CAAqB,GAArBA,CAA2BvD,CAH5B,GAOPpI,CAXT,CAAA4L,CAYC,EAZDA,CADF,CAcE,EAfC,CAlBf,CADJ;;;;;;;;;;;;KJkDAvM,CAAQ,CAACA,QAATA,CAAoBA,KKnEP0M,CAAAA,CAAb,CACC,UAAA,CAAYC,CAAZ,CAAyBnD,CAAzB,CAAqCoD,CAArC,CAA6C,UAAA,MACvCD,YAAcA,CADyB,MAEvCnD,WAAaA,CAF0B,MAGvCoD,OAASA,CAJhB,EAQaC,CAAb,CACC,UAAA,CAAYF,CAAZ,CAAyBnD,CAAzB,CAAqC,UAAA,MAC/BmD,YAAcA,CADiB,MAE/BnD,WAAaA,CAHpB,EAOasD,CAAb,CAAA,aAAA,sBACaH,EAAaN,EAASU,EAAUC,EAAkBC,EAAQ,UAAA,MAChEN,YAAcA,CADkD,MAEhEI,SAAWA,CAFqD,MAGhEC,iBAAmBA,CAH6C,MAIhEX,QAAUA,CAJsD,MAKhEY,OAASA,2CAEP,IACCZ,CAAAA,CADD,CACgC,KAA/BA,OADD,CACUY,CADV,CACgC,KAAtBA,MADV,CACkBF,CADlB,CACgC,KAAdA,QADlB,GAEgBV,CAAO,CAACa,qBAARb,EAFhB,CAEC3C,CAFD,GAECA,IAFD,CAEOG,CAFP,GAEOA,GAFP,OAIA,CACNH,IAAI,CAAEqD,CAAQ,CAACrD,IAATqD,CAAgBrD,CAAhBqD,CAAuBE,CAAM,CAACvD,IAD9B,CAENG,GAAG,CAAEkD,CAAQ,CAAClD,GAATkD,CAAelD,CAAfkD,CAAqBE,CAAM,CAACpD,GAF3B,QAZT,sCCbe,CACdsD,WADc,WACA,CACblL,MAAM,CAACmL,gBAAPnL,CAAwB,SAAxBA,CAAmC,KAAKoL,SAAxCpL,CAAmD,CAAEqL,OAAO,GAAT,CAAnDrL,CADa,CAEbA,MAAM,CAACmL,gBAAPnL,CAAwB,WAAxBA,CAAqC,KAAKsL,WAA1CtL,CAAuD,CAAEqL,OAAO,GAAT,CAAvDrL,CAFa,CAGbA,MAAM,CAACmL,gBAAPnL,CAAwB,WAAxBA,CAAqC,KAAKuL,WAA1CvL,CAAuD,CAAEqL,OAAO,GAAT,CAAvDrL,CAHa,CAIbA,MAAM,CAACmL,gBAAPnL,CAAwB,UAAxBA,CAAoC,KAAKwL,UAAzCxL,CAAqD,CAAEqL,OAAO,GAAT,CAArDrL,CALa,CAAA,CAOdyL,aAPc,WAOE,CACfzL,MAAM,CAAC0L,mBAAP1L,CAA2B,SAA3BA,CAAsC,KAAKoL,SAA3CpL,CADe,CAEfA,MAAM,CAAC0L,mBAAP1L,CAA2B,WAA3BA,CAAwC,KAAKsL,WAA7CtL,CAFe,CAGfA,MAAM,CAAC0L,mBAAP1L,CAA2B,WAA3BA,CAAwC,KAAKuL,WAA7CvL,CAHe,CAIfA,MAAM,CAAC0L,mBAAP1L,CAA2B,UAA3BA,CAAuC,KAAKwL,UAA5CxL,CAXa,CAAA,CAad2L,OAbc,WAaH,IACN,CAAC,KAAKC,KAAL,CAAWC,eACT,IAAIC,CAAAA,KAAJ,CACL,8EADK,OAIFC,QAAU,EANL,MAOLC,eAAiB,EAPZ,MAQLC,UArBQ,CAAA,CAuBdC,OAAO,CAAE,CACRC,WADQ,WACO,CACT,KAAKF,OADI,QAERA,UAFQ,MAGRG,MAAM,QAHE,CADP,CAAA,CAORC,YAPQ,WAOQ,CACX,KAAKJ,OADM,QAETA,UAFS,MAGTG,MAAM,QAHG,CAPR,CAAA,CAaRE,YAbQ,UAaM7I,EAAG,CACZA,CAAC,CAAC8I,UADU,QAEVR,UAActI,CAAC,CAACsI,QAFN,CAIX,CAAC,KAAKE,OAJK,OAKTG,MAAM,QALG,CAQX3I,CAAC,CAACsI,OAAFtI,CAAUwB,MARC,OASTuH,WACJ,KAAKT,OAAL,CAAavB,MAAb,CACC,SAACiC,CAAD,CAAOC,CAAP,CAAiB,OACT,CACNC,OAAO,CAAEF,CAAI,CAACE,OAALF,CAAeC,CAAK,CAACC,OAAND,CAAgBjJ,CAAC,CAACsI,OAAFtI,CAAUwB,MAD5C,CAEN2H,OAAO,CAAEH,CAAI,CAACG,OAALH,CAAeC,CAAK,CAACE,OAANF,CAAgBjJ,CAAC,CAACsI,OAAFtI,CAAUwB,MAF5C,CAFT,CAAA,CAOC,CAAE0H,OAAO,CAAE,CAAX,CAAcC,OAAO,CAAE,CAAvB,CAPD,EAVa,CAqBXnJ,CAAC,CAACoJ,cArBS,EAsBdpJ,CAAC,CAACoJ,cAAFpJ,EAtBc,CAwBfA,CAAC,CAACqJ,eAAFrJ,EAxBe,CAbT,CAAA,CAwCR+H,UAxCQ,WAwCM,MACRuB,YAzCE,CAAA,CA2CRxB,WA3CQ,UA2CK9H,EAAG,CACX,KAAKsI,OAAL,CAAa9G,MADF,QAET+H,YAAYvJ,EAAGA,CAAC,CAACsI,QAFR,CAGVtI,CAAC,CAACoJ,cAHQ,EAIbpJ,CAAC,CAACoJ,cAAFpJ,EAJa,CAMVA,CAAC,CAACqJ,eANQ,EAObrJ,CAAC,CAACqJ,eAAFrJ,EAPa,CA3CR,CAAA,CAsDRwJ,WAtDQ,UAsDKxJ,EAAG,IACTiJ,CAAAA,CAAK,CAAG,CACbQ,IAAI,GADS,CAEbP,OAAO,CAAElJ,CAAC,CAACkJ,OAFE,CAGbC,OAAO,CAAEnJ,CAAC,CAACmJ,OAHE,OAKTb,QAAU,CAACW,CAAD,CANA,MAOVF,WAAWE,EAPD,CAQfjJ,CAAC,CAACqJ,eAAFrJ,EA9DO,CAAA,CAgER6H,WAhEQ,UAgEK7H,EAAG,CACX,KAAKsI,OAAL,CAAa9G,MADF,QAET+H,YAAYvJ,EAAG,CACnB,CACCyJ,IAAI,GADL,CAECP,OAAO,CAAElJ,CAAC,CAACkJ,OAFZ,CAGCC,OAAO,CAAEnJ,CAAC,CAACmJ,OAHZ,CADmB,EAFN,CASVnJ,CAAC,CAACoJ,cATQ,EAUbpJ,CAAC,CAACoJ,cAAFpJ,EAVa,CAhER,CAAA,CA8ER2H,SA9EQ,WA8EK,MACPW,QAAU,EA/ER,CAAA,CAiFRS,UAjFQ,UAiFIE,EAAO,IACZb,CAAAA,CAAS,CAAG,KAAKD,KAAL,CAAWC,SADX,GAEoBA,CAAS,CAACZ,qBAAVY,EAFpB,CAEVpE,CAFU,GAEVA,IAFU,CAEJC,CAFI,GAEJA,KAFI,CAEGG,CAFH,GAEGA,MAFH,CAEWD,CAFX,GAEWA,GAFX,MAIboD,OAAS,CACbvD,IAAI,CAAEiF,CAAK,CAACC,OAAND,CAAgBjF,CADT,CAEbG,GAAG,CAAE8E,CAAK,CAACE,OAANF,CAAgB9E,CAFR,CAGbC,MAAM,CAAEA,CAAM,CAAG6E,CAAK,CAACE,OAHV,CAIblF,KAAK,CAAEA,CAAK,CAAGgF,CAAK,CAACC,OAJR,CArFP,CAAA,CA4FRK,WA5FQ,UA4FKG,EAAOpB,EAAS,IACtBqB,CAAAA,CAAU,GAAOrB,MACnB,KAAKA,OAAL,CAAa9G,OAAQ,IACI,CAAxB,QAAK8G,OAAL,CAAa9G,MAAb,EAAmD,CAAtBmI,GAAAA,CAAU,CAACnI,OAAc,IACnDmF,CAAAA,CAAO,CAAG,KAAKwB,KAAL,CAAWC,eACtBO,MAAM,OAAQ,GAAIvB,CAAAA,CAAJ,CAClBsC,CADkB,CAElB/C,CAFkB,CAGlB,CACC3C,IAAI,CAAE2F,CAAU,CAAC,CAAD,CAAVA,CAAcT,OADrB,CAEC/E,GAAG,CAAEwF,CAAU,CAAC,CAAD,CAAVA,CAAcR,OAFpB,CAHkB,CAOlB,CACCnF,IAAI,CAAE,KAAKsE,OAAL,CAAa,CAAb,EAAgBY,OADvB,CAEC/E,GAAG,CAAE,KAAKmE,OAAL,CAAa,CAAb,EAAgBa,OAFtB,CAPkB,CAWlB,KAAK5B,MAXa,QAcfe,QAAUqB,EA/GT,CAAA,CAkHRL,UAlHQ,WAkHM,MACRhB,QAAU,EADF,CAET,KAAKE,OAFI,QAGPG,MAAM,QAHC,MAIPH,UAJO,EAlHN,CAvBK;;;;;;owQCOFnD,EAAqB,CAAG,CAAC,MAAD,CAAS,OAAT,EACxBG,EAAmB,CAAG,CAAC,KAAD,CAAQ,QAAR,EACtBE,EAAc,CAAG,CAAC,MAAD,CAAS,OAAT,CAAkB,KAAlB,CAAyB,QAAzB,gsOT6IvB,UAAA,CAAkG,OA8F7DzL,IAAI,CAAC2P,KA9FwD,CAA/ErF,CAA+E,GAA/EA,WAA+E,CAAlEC,CAAkE,GAAlEA,YAAkE,CAApDC,CAAoD,GAApDA,SAAoD,CAAzCV,CAAyC,GAAzCA,WAAyC,CAA5B8F,CAA4B,GAA5BA,WAA4B,CAAfC,CAAe,GAAfA,WAAe,CAClGjG,CAAiB,MACnBU,GACHN,KAAK,CAAEM,CAAW,CAACP,IAAZO,CAAmBA,CAAW,CAAC1G,MACtCuG,MAAM,CAAEG,CAAW,CAACJ,GAAZI,CAAkBA,CAAW,CAACxG,QAJiE,CAOlGmJ,CAAM,CAAG4C,CAAW,CAAC5C,MAAZ4C,EAAsB,EAPmE,CASpGhG,CAAU,MACVgG,CAAW,CAAChG,WAVwF,CAalGiG,CAAiB,CAAG7C,CAAM,CAAC6C,iBAAP7C,EAA4B,CACrDlD,IAAI,GADiD,CAErDC,KAAK,GAFgD,CAGrDG,MAAM,GAH+C,CAIrDD,GAAG,GAJkD,CAbkD,CAoBxG0C,MAAM,CAACC,IAAPD,CAAYkD,CAAZlD,EAA+BvB,OAA/BuB,CAAuC,SAAAtB,CAAA,CAAa,CAC9CwE,CAAiB,CAACxE,CAAD,CAD6B,GAElDzB,CAAU,CAACyB,CAAD,CAAVzB,CAAwB,CAF0B,CAApD,CAAA+C,CApBwG,IA0BpG3B,CAAAA,CAAY,CAAGtB,CAAe,CAACC,CAAD,CAAoBC,CAApB,CAAgCC,CAAhC,CA1BsE,CA2BpGoB,CAAa,CAAGjB,CAAgB,CAACL,CAAD,CAAoBC,CAApB,CAAgCC,CAAhC,CA3BoE,CA8BxGD,CAAU,CAAGO,CAAa,CAACP,CAAD,CAAaD,CAAb,CAAgCW,CAAhC,CAA8CT,CAA9C,CAA2DU,CAA3D,CA9B8E,CAiCxGS,CAAY,CAAGtB,CAAe,CAACC,CAAD,CAAoBC,CAApB,CAAgCC,CAAhC,CAjC0E,CAkCxGoB,CAAa,CAAGjB,CAAgB,CAACL,CAAD,CAAoBC,CAApB,CAAgCC,CAAhC,CAlCwE;GAqCpGW,CAAAA,CAAW,CAAG,QACdwC,CAAM,CAAC8C,oBACVtF,CAAW,CAAGb,CAAiB,CAAChG,KAAlBgG,CAA0BA,CAAiB,CAAC9F,OAChD8L,CAAW,CAACI,OAAZJ,EAAuB3E,CAAY,CAAGC,CAAfD,CAA+B2E,CAAW,CAACI,QAC5EvF,CAAW,CAAGmF,CAAW,CAACI,QAChBJ,CAAW,CAACK,OAAZL,EAAuB3E,CAAY,CAAGC,CAAfD,CAA+B2E,CAAW,CAACK,UAC5ExF,CAAW,CAAGmF,CAAW,CAACK,SAGvBxF,EAAa,IACVyF,CAAAA,CADU,CACYjD,CADZ,CACViD,oBACDA,IACAtG,CAAiB,CAAChG,KAAlBgG,CAA0BA,CAAiB,CAAC9F,OAC/CoM,CAAgB,CAAG,QAEnBA,CAAgB,CAAG,UAGI,OAArBA,GAAAA,EAA8B,IAC7BC,CAAAA,CAAa,CAAGvG,CAAiB,CAAC9F,MAAlB8F,CAA2BqB,CAAY,CAAGR,EAC1DqF,CAAiB,CAAC5F,GAAlB4F,EAAyBA,CAAiB,CAAC3F,MAFd,EAGhCN,CAAU,CAACM,MAAXN,CAAoB,CAACsG,CAAD,EAAkB,EAAIrG,CAAtB,CAHY,CAIhCD,CAAU,CAACK,GAAXL,CAAiB,CAACsG,CAAD,EAAkB,EAAIrG,CAAtB,CAJe,EAKtBgG,CAAiB,CAAC5F,GALI,CAMhCL,CAAU,CAACK,GAAXL,CAAiB,CAACsG,CAAD,CAAiBrG,CANF,CAOtBgG,CAAiB,CAAC3F,MAPI,CAQhCN,CAAU,CAACM,MAAXN,CAAoB,CAACsG,CAAD,CAAiBrG,CARL,CAStBgG,CAAiB,CAAC9F,KATI,CAUhCH,CAAU,CAACG,KAAXH,CAAmB,CAVa,CAWtBiG,CAAiB,CAAC/F,IAXI,GAYhCF,CAAU,CAACE,IAAXF,CAAkB,CAZc,CAAlC,KAcO,IAAyB,QAArBqG,GAAAA,CAAJ,CAAmC,IACrCE,CAAAA,CAAY,CAAGxG,CAAiB,CAAChG,KAAlBgG,CAA0BsB,CAAa,CAAGT,EACzDqF,CAAiB,CAAC/F,IAAlB+F,EAA0BA,CAAiB,CAAC9F,KAFP,EAGxCH,CAAU,CAACE,IAAXF,CAAkB,CAACuG,CAAD,EAAiB,EAAItG,CAArB,CAHsB,CAIxCD,CAAU,CAACG,KAAXH,CAAmB,CAACuG,CAAD,EAAiB,EAAItG,CAArB,CAJqB,EAK9BgG,CAAiB,CAAC/F,IALY,CAMxCF,CAAU,CAACE,IAAXF,CAAkB,CAACuG,CAAD,CAAgBtG,CANM,CAO9BgG,CAAiB,CAAC9F,KAPY,CAQxCH,CAAU,CAACG,KAAXH,CAAmB,CAACuG,CAAD,CAAgBtG,CARK,CAS9BgG,CAAiB,CAAC5F,GATY,CAUxCL,CAAU,CAACK,GAAXL,CAAiB,CAVuB,CAW9BiG,CAAiB,CAAC3F,MAXY,GAYxCN,CAAU,CAACM,MAAXN,CAAoB,CAZoB,CAAnC,CAAA,IAeN4B,CAAAA,EAAc,CAACJ,OAAfI,CAAuB,SAAAH,CAAA,CAAa,CACnCzB,CAAU,CAACyB,CAAD,CAAVzB,EAAyB,CAD1B,CAAA4B,CApFsG;MA2FxG5B,CAAAA,CAAU,CAAGO,CAAa,CAACP,CAAD,CAAaD,CAAb,CAAgCW,CAAhC,CAA8CT,CAA9C,CAA2DU,CAA3D,CAAsEC,CAAtE,EAEnB,CACN7G,KAAK,CAAE0G,CAAW,CAAC1G,KAAZ0G,CAAoBR,CAAW,EAAI9J,EAAW6J,CAAU,CAACG,KAAtBhK,EAA+BA,EAAW6J,CAAU,CAACE,IAAtB/J,CAAnC,CADhC,CAEN8D,MAAM,CAAEwG,CAAW,CAACxG,MAAZwG,CAAqBR,CAAW,EAAI9J,EAAW6J,CAAU,CAACK,GAAtBlK,EAA6BA,EAAW6J,CAAU,CAACM,MAAtBnK,CAAjC,CAFlC,CAGN+J,IAAI,CAAE/J,EAAS,CAATA,CAAYsK,CAAW,CAACP,IAAZO,CAAmBR,CAAW,CAAG9J,EAAW6J,CAAU,CAACE,IAAtB/J,CAA7CA,CAHA,CAINkK,GAAG,CAAElK,EAAS,CAATA,CAAYsK,CAAW,CAACJ,GAAZI,CAAkBR,CAAW,CAAG9J,EAAW6J,CAAU,CAACK,GAAtBlK,CAA5CA,CAJC,yCAQD,UAAA,CAAmE,IAAlDsK,CAAAA,CAAkD,GAAlDA,WAAkD,CAArCE,CAAqC,GAArCA,SAAqC,CAA1BV,CAA0B,GAA1BA,WAA0B,CAAbuG,CAAa,GAAbA,SAAa,CACnExG,CAAU,MACZwG,CAAS,CAACxG,WAF2D,CAKnEyG,CAAc,CAAG,CACtBvG,IAAI,CAAEO,CAAW,CAACP,IAAZO,CAAmBR,CAAW,CAAGD,CAAU,CAACE,IAD5B,CAEtBG,GAAG,CAAEI,CAAW,CAACJ,GAAZI,CAAkBR,CAAW,CAAGD,CAAU,CAACK,GAF1B,CAGtBtG,KAAK,CAAE0G,CAAW,CAAC1G,KAHG,CAItBE,MAAM,CAAEwG,CAAW,CAACxG,MAJE,CALkD,OAY/C,EAAtBwM,CAAAA,CAAc,CAACvG,OAClBuG,CAAc,CAACvG,IAAfuG,CAAsB,GAEnBA,CAAc,CAACvG,IAAfuG,CAAsBA,CAAc,CAAC1M,KAArC0M,CAA6C9F,CAAS,CAAC5G,QAC1D0M,CAAc,CAACvG,IAAfuG,CAAsBtQ,EAAS,CAATA,CAAYwK,CAAS,CAAC5G,KAAV4G,CAAkB8F,CAAc,CAAC1M,KAA7C5D,GAEE,CAArBsQ,CAAAA,CAAc,CAACpG,MAClBoG,CAAc,CAACpG,GAAfoG,CAAqB,GAElBA,CAAc,CAACpG,GAAfoG,CAAqBA,CAAc,CAACxM,MAApCwM,CAA6C9F,CAAS,CAAC1G,SAC1DwM,CAAc,CAACpG,GAAfoG,CAAqBtQ,EAAS,CAATA,CAAYwK,CAAS,CAAC1G,MAAV0G,CAAmB8F,CAAc,CAACxM,MAA9C9D,GAGfsQ;;AA+BD,UAAA,CAAoH,IACtHC,CAAAA,CADsH,CAC3GC,CAD2G,CAA5FC,CAA4F,GAA5FA,OAA4F,CAAnFjN,CAAmF,GAAnFA,KAAmF,CAA5EsH,CAA4E,GAA5EA,QAA4E,CAAlED,CAAkE,GAAlEA,SAAkE,CAAvDG,CAAuD,GAAvDA,QAAuD,CAA7CD,CAA6C,GAA7CA,SAA6C,CAAlC2F,CAAkC,GAAlCA,UAAkC,CAAtBC,CAAsB,GAAtBA,WAAsB,CAATC,CAAS,GAATA,KAAS,OAEtH7F,CAAAA,CAAS,CAAGC,GACfuF,CAAS,CAAGvQ,EAAS6K,CAAT7K,CAAgC,EAAZ+K,CAAAA,CAApB/K,EACZwQ,CAAQ,CAAGxQ,EAAS8K,CAAT9K,CAA8B,EAAXgL,CAAAA,CAAnBhL,IAEXwQ,CAAQ,CAAGxQ,EAAS8K,CAAT9K,CAA8B,EAAXgL,CAAAA,CAAnBhL,EACXuQ,CAAS,CAAGvQ,EAAS6K,CAAT7K,CAAgC,EAAZ+K,CAAAA,CAApB/K,GAGN,CACN8D,MAAM,CAAEyM,CADF,CAEN3M,KAAK,CAAE4M,CAFD;AAlBD,UAAA,CAA4G,IAAhFC,CAAAA,CAAgF,GAAhFA,QAASjN,CAAuE,GAAvEA,MAAOqN,CAAgE,GAAhEA,aAAcC,CAAkD,GAAlDA,cAAeJ,CAAmC,GAAnCA,WAAYC,CAAuB,GAAvBA,YAAcC,CAAS,GAATA,YAClG,CACN7G,IAAI,CAAE2G,CAAU,CAAG,CAAbA,CAAiBG,CAAY,CAAG,CADhC,CAEN3G,GAAG,CAAEyG,CAAW,CAAG,CAAdA,CAAkBG,CAAa,CAAG,CAFjC,oCApBD,UAAA,CAAgE,IAA3CL,CAAAA,CAA2C,GAA3CA,OAA2C,CAAlCjN,CAAkC,GAAlCA,KAAkC,CAA3BkN,CAA2B,GAA3BA,UAA2B,CAAfC,CAAe,GAAfA,WAAe,CAChEI,CAAU,CAAGN,CAAO,CAACO,YAD2C,CAEhEC,CAAS,CAAGR,CAAO,CAACS,WAF4C,CAIlEhG,CAAa,CAAG6F,CAJkD,CAKlE9F,CAAY,CAAGyF,CAAU,CAAGK,CAAbL,CAA0BC,CALyB,OAOlE1F,CAAAA,CAAY,CAAGgG,IAClBhG,CAAY,CAAGgG,EACf/F,CAAa,CAAGyF,CAAW,CAAGM,CAAdN,CAA0BD,GAGpC,CACN9M,KAAK,CAAEqH,CADD,CAENnH,MAAM,CAAEoH,CAFF,wCA+BD,UAAA,CAAoG,IAArEJ,CAAAA,CAAqE,GAArEA,SAAUD,CAA2D,GAA3DA,UAAWG,CAAgD,GAAhDA,SAAUD,CAAsC,GAAtCA,UAAW2F,CAA2B,GAA3BA,WAAYC,CAAe,GAAfA,kBACpF,CACN7F,QAAQ,CAAEA,CAAQ,CAAG,GAAXA,CAAiB4F,CADrB,CAEN7F,SAAS,CAAEA,CAAS,CAAG,GAAZA,CAAkB8F,CAFvB,CAGN3F,QAAQ,CAAEA,CAAQ,CAAGA,CAAQ,CAAG,GAAXA,CAAiB0F,CAApB,CAAiCA,CAH7C,CAIN3F,SAAS,CAAEA,CAAS,CAAGA,CAAS,CAAG,GAAZA,CAAkB4F,CAArB,CAAmCA,CAJjD,8lIEjQStQ;;;;;;ivKQnBd,CAAC8Q,UAAU,UAAWC,IACzBC,CAAG,CAACF,SAAJE,CAAc,mBAAdA,CAAmCC,EAAnCD,EACAA,CAAG,CAACF,SAAJE,CAAc,gBAAdA,CAAgCE,EAAhCF,EACAA,CAAG,CAACF,SAAJE,CAAc,gBAAdA,CAAgCG,EAAhCH,EACAA,CAAG,CAACF,SAAJE,CAAc,aAAdA,CAA6BI,EAA7BJ"}